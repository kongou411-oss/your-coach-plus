# 審査取り下げ → 新ビルド提出手順

**状況**: 現在バージョン1.0が「審査待ち」のため、新しいビルドを提出できない

**解決策**: 現在の審査を取り下げて、修正版ビルドを提出する

---

## Step 1: 現在の審査を取り下げる

1. **App Store Connect** で Your Coach+ を開く（既に開いている画面）

2. 左側のメニューから **App Store** を選択

3. 画面上部の **バージョン 1.0** のセクションを確認

4. 右上の **「このバージョンを審査から削除」** または **「審査を取り下げる」** ボタンを探す
   - 場所: 画面右上、または「保存」ボタンの近く
   - もし見つからない場合は、画面を下にスクロールして探す

5. **「このバージョンを審査から削除」** をクリック

6. 確認ダイアログが表示されたら **「削除」** または **「取り下げる」** をクリック

7. ステータスが **「編集可能」** または **「配信準備完了」** に変わることを確認

---

## Step 2: Xcode で新しいビルドを作成

審査を取り下げたら、以下の手順で新しいビルドを作成します：

### 2-1. Xcode を開く

```bash
open /Users/amtheash7/yourcoach_new/ios/App/App.xcodeproj
```

### 2-2. クリーンビルド

1. メニューバー: **Product → Clean Build Folder** (Cmd+Shift+K)

2. **Xcode → Settings → Locations**
   - **Derived Data** の横の **Advanced...** をクリック
   - **Custom** を選択 → **Reset** をクリック → **Done**

### 2-3. ビルド番号を上げる（重要！）

⚠️ **必須**: 同じビルド番号では再アップロードできません

1. プロジェクトナビゲータで **App** プロジェクト（青いアイコン）をクリック

2. **TARGETS** → **App** を選択

3. **General** タブを開く

4. **Identity** セクションの **Build** 番号を確認:
   - 現在: **4**
   - 新しい番号: **5** に変更

5. Cmd+S で保存

### 2-4. Archive 作成

1. メニューバー: **Product → Archive**

2. ビルド完了まで待つ（5-10分）

3. **Organizer** が開いたら、最新のアーカイブを選択

### 2-5. App Store Connect へアップロード

1. **Distribute App** をクリック

2. **App Store Connect** を選択 → **Next**

3. **Upload** を選択 → **Next**

4. 証明書の選択 → **Next**

5. **Upload** をクリック

6. アップロード完了まで待つ（5-15分）

---

## Step 3: App Store Connect で新しいビルドを選択

1. App Store Connect に戻る

2. Your Coach+ → **App Store** → **バージョン 1.0**

3. **ビルド** セクションで **「+」** または **「ビルドを選択」** をクリック

4. 新しいビルド（Build 5）を選択
   - ⚠️ アップロード直後は表示されない場合があります
   - 「処理中」と表示されていたら、10-30分待ってから再度確認

5. ビルドが選択されたら、**保存** をクリック

6. **審査に提出** ボタンをクリック

---

## よくある質問

### Q1: 「このバージョンを審査から削除」ボタンが見つからない

**A**: 以下の場所を確認してください：
- 画面右上（「保存」ボタンの近く）
- 画面を下にスクロールした下部
- または、バージョン情報の「...」メニュー内

### Q2: ビルド番号を変更し忘れた

**A**: Xcode に戻って以下を実行：
1. **General** → **Build** を 5 に変更
2. 再度 **Product → Archive** を実行

### Q3: 審査を取り下げると何かデメリットはある？

**A**: ありません。修正版を提出するための標準的な手順です。
- 審査順序には影響しません
- 何度でも取り下げ・再提出可能です

---

## タイムライン

| ステップ | 所要時間 |
|---------|---------|
| 審査取り下げ | 即時 |
| Xcode Archive | 5-10分 |
| アップロード | 5-15分 |
| 処理完了（選択可能に） | 10-30分 |
| 審査開始 | 提出後1-3日 |

---

## 🎯 今回は必ず成功するはず

**修正内容**:
- ✅ GoogleSignIn 9.1.0（プライバシーマニフェスト含む）
- ✅ GTMAppAuth 5.0.0（プライバシーマニフェスト含む）
- ✅ GTMSessionFetcher 3.5.0（プライバシーマニフェスト含む）
- ✅ 全キャッシュクリーンアップ済み
- ✅ 12個のプライバシーマニフェスト検出済み

---

問題が発生したら、スクリーンショットと共に Claude Code に報告してください！

頑張ってください！ 🚀
