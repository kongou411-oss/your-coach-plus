# ãƒ“ã‚¿ãƒŸãƒ³ãƒ»ãƒŸãƒãƒ©ãƒ«ãƒ‡ãƒ¼ã‚¿æ›´æ–°ãƒ—ãƒ­ãƒˆã‚³ãƒ«

## ğŸ“‹ æ¦‚è¦

foodDatabase.jsã«é£Ÿå“ã®ãƒ“ã‚¿ãƒŸãƒ³ãƒ»ãƒŸãƒãƒ©ãƒ«ãƒ‡ãƒ¼ã‚¿ï¼ˆ13ç¨®ã®ãƒ“ã‚¿ãƒŸãƒ³ + 13ç¨®ã®ãƒŸãƒãƒ©ãƒ«ï¼‰ã‚’è¿½åŠ ãƒ»ç·¨é›†ã™ã‚‹éš›ã®æ¨™æº–æ‰‹é †æ›¸ã€‚
æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ã‚’é˜²ãã€ç¢ºå®Ÿã«ãƒ‡ãƒ¼ã‚¿ã‚’çµ±åˆã™ã‚‹ãŸã‚ã®ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã€‚

---

## ğŸ¯ å¯¾è±¡ãƒ‡ãƒ¼ã‚¿

### ãƒ“ã‚¿ãƒŸãƒ³ï¼ˆ13ç¨®ï¼‰
- vitaminAï¼ˆÎ¼gï¼‰
- vitaminDï¼ˆÎ¼gï¼‰
- vitaminEï¼ˆmgï¼‰
- vitaminKï¼ˆÎ¼gï¼‰
- vitaminB1ï¼ˆmgï¼‰
- vitaminB2ï¼ˆmgï¼‰
- niacinï¼ˆmgï¼‰
- vitaminB6ï¼ˆmgï¼‰
- vitaminB12ï¼ˆÎ¼gï¼‰
- folateï¼ˆÎ¼gï¼‰â€»JSONã§ã¯"folate"ã€DBã§ã‚‚"folate"ã§çµ±ä¸€
- pantothenicAcidï¼ˆmgï¼‰
- biotinï¼ˆÎ¼gï¼‰
- vitaminCï¼ˆmgï¼‰

### ãƒŸãƒãƒ©ãƒ«ï¼ˆ13ç¨®ï¼‰
- sodiumï¼ˆmgï¼‰
- potassiumï¼ˆmgï¼‰
- calciumï¼ˆmgï¼‰
- magnesiumï¼ˆmgï¼‰
- phosphorusï¼ˆmgï¼‰
- ironï¼ˆmgï¼‰
- zincï¼ˆmgï¼‰
- copperï¼ˆmgï¼‰
- manganeseï¼ˆmgï¼‰
- iodineï¼ˆÎ¼gï¼‰
- seleniumï¼ˆÎ¼gï¼‰
- chromiumï¼ˆÎ¼gï¼‰
- molybdenumï¼ˆÎ¼gï¼‰

---

## ğŸ” STEP 1: ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã®ç‰¹å®š

### 1-1. å…«è¨‚ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã§æ¤œç´¢

**æ¤œç´¢URL**: https://fooddb.mext.go.jp/

**æ¤œç´¢æ–¹æ³•**:
1. é£Ÿå“åã‚’æ—¥æœ¬èªã§å…¥åŠ›ï¼ˆä¾‹ï¼šã€Œãƒ–ãƒ­ãƒƒã‚³ãƒªãƒ¼ã€ã€Œé¶ã‚€ã­è‚‰ã€ï¼‰
2. æ¤œç´¢çµæœã‹ã‚‰è©²å½“ã™ã‚‹é£Ÿå“ã‚’é¸æŠ
3. ITEM_NOï¼ˆä¾‹ï¼š`6_06223_7`ï¼‰ã‚’ç¢ºèª
4. URLã‚’ã‚³ãƒ”ãƒ¼ï¼ˆä¾‹ï¼š`https://fooddb.mext.go.jp/details/details.pl?ITEM_NO=6_06223_7`ï¼‰

### 1-2. ãƒ‡ãƒ¼ã‚¿ãŒå…«è¨‚ã«ãªã„å ´åˆ

ä»¥ä¸‹ã®é †ã§ä»£æ›¿ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã‚’ç¢ºèªï¼š

1. **USDAï¼ˆç±³å›½è¾²å‹™çœï¼‰**: https://fdc.nal.usda.gov/
2. **ç§‘å­¦è«–æ–‡ãƒ»åˆ†æãƒ‡ãƒ¼ã‚¿**: Google Scholarç­‰ã§æ¤œç´¢
3. **è£½å“ã®æ „é¤Šæˆåˆ†è¡¨ç¤º**ï¼ˆå¸‚è²©å“ã®å ´åˆï¼‰
4. **é¡ä¼¼é£Ÿå“ã‹ã‚‰ã®æ¨å®š**ï¼ˆæœ€çµ‚æ‰‹æ®µï¼‰

**é‡è¦**: ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã‚’å¿…ãšè¨˜éŒ²ã™ã‚‹ã“ã¨

---

## ğŸ“ STEP 2: ãƒ‡ãƒ¼ã‚¿åé›†ã¨JSONä½œæˆ

### 2-1. WebFetchã§ãƒ‡ãƒ¼ã‚¿å–å¾—ï¼ˆå…«è¨‚ã®å ´åˆï¼‰

```
WebFetch URL: https://fooddb.mext.go.jp/details/details.pl?ITEM_NO=X_XXXXX_X
Prompt: Extract all vitamin and mineral content per 100g. Return vitaminA, vitaminD, vitaminE, vitaminK, vitaminB1, vitaminB2, niacin, vitaminB6, vitaminB12, folate (not folicAcid), pantothenicAcid, biotin, vitaminC, sodium, potassium, calcium, magnesium, phosphorus, iron, zinc, copper, manganese, iodine, selenium, chromium, molybdenum. Use 0 for trace amounts or not detected.
```

### 2-2. JSONãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ

**ãƒ•ã‚¡ã‚¤ãƒ«åè¦å‰‡**: `{category}_vitamins_minerals.json`
- ä¾‹ï¼š`vegetables_vitamins_minerals.json`
- ä¾‹ï¼š`seasonings_vitamins_minerals.json`

**JSONãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ**ï¼ˆå¿…ãšå³å®ˆï¼‰:

```json
{
  "é£Ÿå“å1": {
    "vitaminA": æ•°å€¤,
    "vitaminD": æ•°å€¤,
    "vitaminE": æ•°å€¤,
    "vitaminK": æ•°å€¤,
    "vitaminB1": æ•°å€¤,
    "vitaminB2": æ•°å€¤,
    "niacin": æ•°å€¤,
    "vitaminB6": æ•°å€¤,
    "vitaminB12": æ•°å€¤,
    "folate": æ•°å€¤,
    "pantothenicAcid": æ•°å€¤,
    "biotin": æ•°å€¤,
    "vitaminC": æ•°å€¤,
    "sodium": æ•°å€¤,
    "potassium": æ•°å€¤,
    "calcium": æ•°å€¤,
    "magnesium": æ•°å€¤,
    "phosphorus": æ•°å€¤,
    "iron": æ•°å€¤,
    "zinc": æ•°å€¤,
    "copper": æ•°å€¤,
    "manganese": æ•°å€¤,
    "iodine": æ•°å€¤,
    "selenium": æ•°å€¤,
    "chromium": æ•°å€¤,
    "molybdenum": æ•°å€¤
  },
  "é£Ÿå“å2": {
    ...
  }
}
```

**æ³¨æ„äº‹é …**:
- âœ… æ•°å€¤ã¯å°æ•°ç‚¹ç¬¬1ä½ã¾ã§ï¼ˆä¾‹ï¼š1.0ã€0.1ï¼‰
- âœ… å¾®é‡ã¾ãŸã¯Trï¼ˆç—•è·¡ï¼‰ã¯0ã«ã™ã‚‹
- âœ… æ¤œå‡ºã•ã‚Œãšï¼ˆ-ï¼‰ã¯0ã«ã™ã‚‹
- âœ… æœªæ¸¬å®šï¼ˆç©ºæ¬„ï¼‰ã‚‚0ã«ã™ã‚‹
- âŒ æ–‡å­—åˆ—ã«ã—ãªã„ï¼ˆ`"0"` ã§ã¯ãªã `0`ï¼‰

---

## ğŸ STEP 3: Pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆä½œæˆ

### 3-1. ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ

**ãƒ•ã‚¡ã‚¤ãƒ«å**: `update_{category}.py`ï¼ˆä¾‹ï¼š`update_vegetables.py`ï¼‰

```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
{ã‚«ãƒ†ã‚´ãƒªå}ã®ãƒ“ã‚¿ãƒŸãƒ³ãƒ»ãƒŸãƒãƒ©ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’ä¸€æ‹¬æ›´æ–°ã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
"""

import re
import json

# JSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿
with open('{category}_vitamins_minerals.json', 'r', encoding='utf-8') as f:
    ITEMS_DATA = json.load(f)

def update_items_data(file_path):
    """{ã‚«ãƒ†ã‚´ãƒªå}ã®ãƒ“ã‚¿ãƒŸãƒ³ãƒ»ãƒŸãƒãƒ©ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°"""

    with open(file_path, 'r', encoding='utf-8') as f:
        content = f.read()

    for item_name, nutrients in ITEMS_DATA.items():
        # é£Ÿå“ã‚¨ãƒ³ãƒˆãƒªã‚’æ¤œç´¢ï¼ˆ1è¡Œå½¢å¼ï¼‰
        pattern = rf'(\s*"{re.escape(item_name)}":\s*\{{[^}}]+\}}),?'

        match = re.search(pattern, content)
        if not match:
            print(f"[WARN] {item_name} ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ")
            continue

        old_line = match.group(1)

        # æ—¢å­˜ã®ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ‘ãƒ¼ã‚¹
        try:
            # JavaScriptã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’JSONå½¢å¼ã«å¤‰æ›
            json_str = old_line.replace(f'"{item_name}":', '').strip()
            if json_str.endswith(','):
                json_str = json_str[:-1]  # æœ«å°¾ã®ã‚«ãƒ³ãƒã‚’å‰Šé™¤

            # ã‚·ãƒ³ã‚°ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆã‚’ãƒ€ãƒ–ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆã«å¤‰æ›
            json_str = json_str.replace("'", '"')

            existing_data = json.loads(json_str)
        except json.JSONDecodeError as e:
            print(f"[WARN] {item_name} ã®ãƒ‘ãƒ¼ã‚¹ã«å¤±æ•—: {e}")
            existing_data = {}

        # æ–°ã—ã„ãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆï¼ˆæ—¢å­˜ãƒ‡ãƒ¼ã‚¿ + æ–°è¦æ „é¤Šç´ ï¼‰
        # é †åº: åŸºæœ¬æƒ…å ± â†’ ãƒ“ã‚¿ãƒŸãƒ³ â†’ ãƒŸãƒãƒ©ãƒ« â†’ ãã®ä»–
        new_data = {}

        # åŸºæœ¬æƒ…å ±ã‚’ä¿æŒ
        for key in ['calories', 'protein', 'fat', 'carbs', 'sugar', 'fiber', 'solubleFiber', 'insolubleFiber',
                    'unit', 'servingSize', 'servingUnit', 'category', 'cost']:
            if key in existing_data:
                new_data[key] = existing_data[key]

        # ãƒ“ã‚¿ãƒŸãƒ³ã‚’è¿½åŠ ï¼ˆã‚­ãƒ¼åã‚’çµ±ä¸€: folateï¼‰
        vitamin_mapping = {
            'vitaminA': 'vitaminA',
            'vitaminD': 'vitaminD',
            'vitaminE': 'vitaminE',
            'vitaminK': 'vitaminK',
            'vitaminB1': 'vitaminB1',
            'vitaminB2': 'vitaminB2',
            'niacin': 'niacin',
            'vitaminB6': 'vitaminB6',
            'vitaminB12': 'vitaminB12',
            'folate': 'folate',  # JSONã§ã¯"folate"
            'pantothenicAcid': 'pantothenicAcid',
            'biotin': 'biotin',
            'vitaminC': 'vitaminC'
        }

        for json_key, db_key in vitamin_mapping.items():
            new_data[db_key] = nutrients.get(json_key, 0)

        # ãƒŸãƒãƒ©ãƒ«ã‚’è¿½åŠ 
        for key in ['sodium', 'potassium', 'calcium', 'magnesium', 'phosphorus', 'iron', 'zinc',
                    'copper', 'manganese', 'iodine', 'selenium', 'chromium', 'molybdenum']:
            new_data[key] = nutrients[key]

        # ãã®ä»–ã®æƒ…å ±ã‚’ä¿æŒï¼ˆè„‚è‚ªé…¸ã€omega3ã€ã‚¢ãƒŸãƒé…¸ã‚¹ã‚³ã‚¢ãªã©ï¼‰
        for key in ['saturatedFat', 'monounsaturatedFat', 'polyunsaturatedFat', 'omega3', 'aminoAcidScore']:
            if key in existing_data:
                new_data[key] = existing_data[key]

        # æ–°ã—ã„è¡Œã‚’ä½œæˆï¼ˆ1è¡Œå½¢å¼ï¼‰
        fields = []
        for key, value in new_data.items():
            if isinstance(value, str):
                fields.append(f'"{key}": "{value}"')
            else:
                fields.append(f'"{key}": {value}')

        new_line = f'"{item_name}": {{ {", ".join(fields)} }}'

        # ç½®æ›
        content = content.replace(old_line, new_line)
        print(f"[OK] {item_name} ã‚’æ›´æ–°ã—ã¾ã—ãŸ")

    # ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãè¾¼ã¿
    with open(file_path, 'w', encoding='utf-8') as f:
        f.write(content)

    print(f"\n[OK] å®Œäº†: {len(ITEMS_DATA)}ä»¶ã®{ã‚«ãƒ†ã‚´ãƒªå}ã‚’æ›´æ–°ã—ã¾ã—ãŸ")


if __name__ == '__main__':
    file_path = r'C:\Users\yourc\yourcoach_new\src\foodDatabase.js'

    # æ›´æ–°ã‚’å®Ÿè¡Œ
    update_items_data(file_path)
```

### 3-2. ã‚¹ã‚¯ãƒªãƒ—ãƒˆä½œæˆæ™‚ã®æ³¨æ„

- âœ… ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã¯å¿…ãš `utf-8` ã‚’æŒ‡å®š
- âœ… ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã¯çµ¶å¯¾ãƒ‘ã‚¹ï¼ˆ`r'C:\Users\yourc\yourcoach_new\src\foodDatabase.js'`ï¼‰
- âœ… JSONãƒ•ã‚¡ã‚¤ãƒ«åã¯æ­£ç¢ºã«è¨˜è¼‰
- âœ… ã‚«ãƒ†ã‚´ãƒªåã¯æ—¥æœ¬èªã§ã‚ã‹ã‚Šã‚„ã™ã

---

## âš™ï¸ STEP 4: ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œ

### 4-1. å®Ÿè¡Œå‰ã®ç¢ºèª

```bash
# 1. JSONãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã™ã‚‹ã‹ç¢ºèª
dir {category}_vitamins_minerals.json

# 2. Pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒå­˜åœ¨ã™ã‚‹ã‹ç¢ºèª
dir update_{category}.py

# 3. foodDatabase.jsã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½œæˆï¼ˆæ¨å¥¨ï¼‰
copy src\foodDatabase.js src\foodDatabase.js.backup
```

### 4-2. ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œ

```bash
python update_{category}.py
```

### 4-3. å®Ÿè¡Œçµæœã®ç¢ºèª

**æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›**:
```
[OK] é£Ÿå“å1 ã‚’æ›´æ–°ã—ã¾ã—ãŸ
[OK] é£Ÿå“å2 ã‚’æ›´æ–°ã—ã¾ã—ãŸ
[OK] é£Ÿå“å3 ã‚’æ›´æ–°ã—ã¾ã—ãŸ
...
[OK] å®Œäº†: Nä»¶ã®ã‚«ãƒ†ã‚´ãƒªåã‚’æ›´æ–°ã—ã¾ã—ãŸ
```

**ã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸå ´åˆ**:
```
[WARN] é£Ÿå“åX ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ
```
â†’ foodDatabase.jså†…ã®é£Ÿå“åã¨JSONã®é£Ÿå“åãŒå®Œå…¨ä¸€è‡´ã—ã¦ã„ã‚‹ã‹ç¢ºèª

---

## ğŸ” STEP 5: æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ãƒã‚§ãƒƒã‚¯ï¼ˆå¿…é ˆï¼‰

### 5-1. æ‰‹å‹•ç¢ºèªï¼ˆé‡è¦ï¼‰

**Pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯æ”¹è¡Œã‚’æ­£ã—ãæ‰±ãˆãªã„å ´åˆãŒã‚ã‚‹ãŸã‚ã€å¿…ãšæ‰‹å‹•ã§ç¢ºèª**

#### ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆ1: ã‚³ãƒ¡ãƒ³ãƒˆè¡Œã®æ”¹è¡Œ

**âŒ é–“é•ã„ï¼ˆæ§‹æ–‡ã‚¨ãƒ©ãƒ¼ï¼‰**:
```javascript
// å¡©é¡"é£Ÿå¡©": { ... },
```

**âœ… æ­£ã—ã„**:
```javascript
// å¡©é¡
"é£Ÿå¡©": { ... },
```

#### ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆ2: ã‚¢ã‚¤ãƒ†ãƒ é–“ã®ã‚«ãƒ³ãƒ

**âŒ é–“é•ã„ï¼ˆæ§‹æ–‡ã‚¨ãƒ©ãƒ¼ï¼‰**:
```javascript
"é£Ÿå¡©": { ... }"ãƒ”ãƒ³ã‚¯ã‚½ãƒ«ãƒˆï¼ˆãƒ’ãƒãƒ©ãƒ¤å²©å¡©ï¼‰": { ... },
```

**âœ… æ­£ã—ã„**:
```javascript
"é£Ÿå¡©": { ... },
"ãƒ”ãƒ³ã‚¯ã‚½ãƒ«ãƒˆï¼ˆãƒ’ãƒãƒ©ãƒ¤å²©å¡©ï¼‰": { ... },
```

#### ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆ3: ã‚»ã‚¯ã‚·ãƒ§ãƒ³æœ€å¾Œã®ã‚¢ã‚¤ãƒ†ãƒ 

**âŒ é–“é•ã„ï¼ˆæ¬¡ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¨çµåˆï¼‰**:
```javascript
"é»’ç³–": { ... },"ã¯ã¡ã¿ã¤": { ... },
```

**âœ… æ­£ã—ã„**:
```javascript
"é»’ç³–": { ... },
"ã¯ã¡ã¿ã¤": { ... },
```

### 5-2. æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ä¿®æ­£ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆæ¨å¥¨ï¼‰

æ›´æ–°å¾Œã€ä»¥ä¸‹ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ¤œç´¢ã—ã¦æ‰‹å‹•ã§æ”¹è¡Œã‚’è¿½åŠ ï¼š

**æ¤œç´¢ãƒ‘ã‚¿ãƒ¼ãƒ³**:
```
// [ã‚³ãƒ¡ãƒ³ãƒˆ]"
```

**ç½®æ›**:
```
// [ã‚³ãƒ¡ãƒ³ãƒˆ]
"
```

**å®Ÿè£…ä¾‹ï¼ˆVS Codeç­‰ã®ã‚¨ãƒ‡ã‚£ã‚¿ï¼‰**:
1. `Ctrl + H`ï¼ˆç½®æ›ï¼‰
2. æ­£è¦è¡¨ç¾ãƒ¢ãƒ¼ãƒ‰ON
3. æ¤œç´¢: `(// .+)"([^"]+":)`
4. ç½®æ›: `$1\n"$2`

### 5-3. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã§ã®ç¢ºèª

```bash
# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
# èµ·å‹•ã—ã¦ã„ãªã„å ´åˆ
npm run dev

# ãƒ–ãƒ©ã‚¦ã‚¶ã§F12ã‚’æŠ¼ã—ã¦ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚’é–‹ã
# æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ï¼ˆSyntaxErrorï¼‰ãŒãªã„ã“ã¨ã‚’ç¢ºèª
```

**æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ã®ä¾‹**:
```
SyntaxError: Unexpected string
```
â†’ ã‚³ãƒ¡ãƒ³ãƒˆè¡Œã®ç›´å¾Œã«æ”¹è¡ŒãŒãªã„ã€ã‚«ãƒ³ãƒãŒä¸è¶³ã—ã¦ã„ã‚‹ç­‰

---

## âœ… STEP 6: ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼

### 6-1. foodDatabase.jsã§ç¢ºèª

æ›´æ–°ã—ãŸé£Ÿå“ã®ãƒ‡ãƒ¼ã‚¿ã‚’ç›´æ¥ç¢ºèªï¼š

```bash
# Readãƒ„ãƒ¼ãƒ«ã§è©²å½“è¡Œã‚’ç¢ºèª
Read file_path: C:\Users\yourc\yourcoach_new\src\foodDatabase.js
offset: [è©²å½“è¡Œã®ä»˜è¿‘]
limit: 10
```

### 6-2. ç¢ºèªé …ç›®

- âœ… ãƒ“ã‚¿ãƒŸãƒ³13ç¨®ã™ã¹ã¦ãŒå­˜åœ¨ã™ã‚‹
- âœ… ãƒŸãƒãƒ©ãƒ«13ç¨®ã™ã¹ã¦ãŒå­˜åœ¨ã™ã‚‹
- âœ… æ—¢å­˜ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆcalories, proteinç­‰ï¼‰ãŒä¿æŒã•ã‚Œã¦ã„ã‚‹
- âœ… ãã®ä»–ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆsaturatedFatç­‰ï¼‰ãŒä¿æŒã•ã‚Œã¦ã„ã‚‹
- âœ… æ•°å€¤ãŒæ­£ã—ã„ï¼ˆ0.0ã§ã¯ãªã0ã€æ–‡å­—åˆ—ã§ã¯ãªãæ•°å€¤ï¼‰

### 6-3. ãƒ–ãƒ©ã‚¦ã‚¶ã§å‹•ä½œç¢ºèª

1. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ï¼ˆhttp://localhost:8000ï¼‰ã«ã‚¢ã‚¯ã‚»ã‚¹
2. é£Ÿäº‹å…¥åŠ›ã§æ›´æ–°ã—ãŸé£Ÿå“ã‚’æ¤œç´¢
3. é£Ÿå“ã‚’é¸æŠã—ã¦è¨˜éŒ²
4. åˆ†æç”»é¢ã§ãƒ“ã‚¿ãƒŸãƒ³ãƒ»ãƒŸãƒãƒ©ãƒ«ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹ã‹ç¢ºèª

---

## ğŸ“Š STEP 7: å®Œäº†å ±å‘Šã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°

### 7-1. æ›´æ–°å±¥æ­´ã®è¨˜éŒ²

**ãƒ•ã‚¡ã‚¤ãƒ«**: `VITAMIN_MINERAL_UPDATE_LOG.md`ï¼ˆãªã‘ã‚Œã°ä½œæˆï¼‰

```markdown
## [YYYY-MM-DD] ã‚«ãƒ†ã‚´ãƒªå Nä»¶æ›´æ–°

**æ›´æ–°å†…å®¹**:
- é£Ÿå“å1
- é£Ÿå“å2
- ...

**ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹**: å…«è¨‚ / USDA / ãã®ä»–

**JSONãƒ•ã‚¡ã‚¤ãƒ«**: {category}_vitamins_minerals.json

**Pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆ**: update_{category}.py

**æ›´æ–°è€…**: Claude Code / ãƒ¦ãƒ¼ã‚¶ãƒ¼å
```

### 7-2. å®Œäº†å ±å‘Šãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

```markdown
## ãƒ“ã‚¿ãƒŸãƒ³ãƒ»ãƒŸãƒãƒ©ãƒ«ãƒ‡ãƒ¼ã‚¿æ›´æ–°å®Œäº†å ±å‘Š

### æ›´æ–°å†…å®¹
{ã‚«ãƒ†ã‚´ãƒªå} {N}ä»¶ã®ãƒ“ã‚¿ãƒŸãƒ³ãƒ»ãƒŸãƒãƒ©ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’è¿½åŠ ãƒ»æ›´æ–°ã—ã¾ã—ãŸã€‚

### å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«
1. **{category}_vitamins_minerals.json**: æ–°è¦ä½œæˆ / æ›´æ–°
2. **update_{category}.py**: æ–°è¦ä½œæˆ
3. **src/foodDatabase.js**: {N}ä»¶ã®é£Ÿå“ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°

### æ›´æ–°ã—ãŸé£Ÿå“
- é£Ÿå“å1ï¼ˆLine XXXï¼‰
- é£Ÿå“å2ï¼ˆLine YYYï¼‰
- ...

### ç¢ºèªæ–¹æ³•
1. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ï¼ˆhttp://localhost:8000ï¼‰ã§é£Ÿäº‹å…¥åŠ›
2. æ›´æ–°ã—ãŸé£Ÿå“ã‚’æ¤œç´¢ã—ã¦é¸æŠ
3. åˆ†æç”»é¢ã§ãƒ“ã‚¿ãƒŸãƒ³ãƒ»ãƒŸãƒãƒ©ãƒ«ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª

### æ§‹æ–‡ã‚¨ãƒ©ãƒ¼
- âœ… ãªã— / âŒ ã‚ã‚Šï¼ˆä¿®æ­£æ¸ˆã¿ï¼‰
```

---

## ğŸš¨ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### å•é¡Œ1: é£Ÿå“ãŒè¦‹ã¤ã‹ã‚‰ãªã„ï¼ˆWARNï¼‰

**åŸå› **: JSONã®é£Ÿå“åã¨foodDatabase.jså†…ã®é£Ÿå“åãŒä¸€è‡´ã—ãªã„

**è§£æ±ºç­–**:
1. foodDatabase.jsã§é£Ÿå“åã‚’å®Œå…¨ä¸€è‡´ã§æ¤œç´¢
2. JSONã®é£Ÿå“åã‚’ä¿®æ­£ï¼ˆã‚¹ãƒšãƒ¼ã‚¹ã€æ‹¬å¼§ã€å…¨è§’/åŠè§’ã«æ³¨æ„ï¼‰

### å•é¡Œ2: æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ï¼ˆSyntaxErrorï¼‰

**åŸå› **: ã‚³ãƒ¡ãƒ³ãƒˆè¡Œã®ç›´å¾Œã«æ”¹è¡ŒãŒãªã„ã€ã‚«ãƒ³ãƒãŒä¸è¶³

**è§£æ±ºç­–**:
1. STEP 5-1ã®ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆã‚’ç¢ºèª
2. æ‰‹å‹•ã§æ”¹è¡Œã‚’è¿½åŠ 
3. ã‚«ãƒ³ãƒã®æœ‰ç„¡ã‚’ç¢ºèª

### å•é¡Œ3: ãƒ‡ãƒ¼ã‚¿ãŒ0ã«ãªã‚‹

**åŸå› **: JSONã®ã‚­ãƒ¼åãŒé–“é•ã£ã¦ã„ã‚‹ã€Pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ãƒãƒƒãƒ”ãƒ³ã‚°ãƒŸã‚¹

**è§£æ±ºç­–**:
1. JSONã®ã‚­ãƒ¼åã‚’ç¢ºèªï¼ˆvitaminA, vitaminB1ç­‰ï¼‰
2. Pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆã®vitamin_mappingã‚’ç¢ºèª

### å•é¡Œ4: æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒæ¶ˆãˆã‚‹

**åŸå› **: Pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ä¿æŒãƒªã‚¹ãƒˆã«å«ã¾ã‚Œã¦ã„ãªã„

**è§£æ±ºç­–**:
1. æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‚’Read toolã§ç¢ºèª
2. ä¿æŒãŒå¿…è¦ãªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ã‚¹ã‚¯ãƒªãƒ—ãƒˆã«è¿½åŠ 
3. ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å†å®Ÿè¡Œ

### å•é¡Œ5: ãƒ”ãƒ³ã‚¯ã‚½ãƒ«ãƒˆã®ã‚ˆã†ã«æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ã§æ¶ˆãˆã‚‹

**åŸå› **: Pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒç”Ÿæˆã™ã‚‹ã‚³ãƒ¼ãƒ‰ã§æ”¹è¡ŒãŒä¸è¶³

**è§£æ±ºç­–**:
1. æ›´æ–°å¾Œã€å¿…ãšSTEP 5-1ã®æ‰‹å‹•ç¢ºèªã‚’å®Ÿæ–½
2. æ¤œç´¢ãƒ‘ã‚¿ãƒ¼ãƒ³ `(// .+)"([^"]+":)` ã§æ¤œç´¢
3. æ”¹è¡Œã‚’è¿½åŠ : `$1\n"$2`

---

## ğŸ“š å‚è€ƒæƒ…å ±

### ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹URL
- **å…«è¨‚**: https://fooddb.mext.go.jp/
- **USDA**: https://fdc.nal.usda.gov/
- **æ–‡ç§‘çœ**: https://www.mext.go.jp/a_menu/syokuhinseibun/index.htm

### æ—¢å­˜ã®æ›´æ–°ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
- `update_staples.py` - ä¸»é£Ÿ34ä»¶
- `update_vegetables.py` - é‡èœ41ä»¶
- `update_fruits.py` - æœç‰©10ä»¶
- `update_beans_nuts.py` - è±†é¡ãƒ»ãƒŠãƒƒãƒ„12ä»¶
- `update_seasonings.py` - èª¿å‘³æ–™9ä»¶
- `update_wagashi.py` - å’Œè“å­3ä»¶

### JSONãƒ•ã‚¡ã‚¤ãƒ«
- `staples_vitamins_minerals.json`
- `vegetables_vitamins_minerals.json`
- `fruits_vitamins_minerals.json`
- `beans_nuts_vitamins_minerals.json`
- `seasonings_vitamins_minerals.json`
- `wagashi_vitamins_minerals.json`

---

## âœ¨ ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

1. **ä¸€åº¦ã«å¤šæ•°ã®é£Ÿå“ã‚’æ›´æ–°ã—ãªã„**: ã‚«ãƒ†ã‚´ãƒªã”ã¨ã«10-50ä»¶ãšã¤æ›´æ–°
2. **ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’å¿…ãšä½œæˆ**: `foodDatabase.js.backup`
3. **æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ãƒã‚§ãƒƒã‚¯ã‚’å¿…ãšå®Ÿæ–½**: STEP 5ã‚’çœç•¥ã—ãªã„
4. **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã‚’è¨˜éŒ²**: ãƒˆãƒ¬ãƒ¼ã‚µãƒ“ãƒªãƒ†ã‚£ã®ç¢ºä¿
5. **æ›´æ–°å±¥æ­´ã‚’æ®‹ã™**: `VITAMIN_MINERAL_UPDATE_LOG.md`
6. **ã‚³ãƒŸãƒƒãƒˆå‰ã«å‹•ä½œç¢ºèª**: ãƒ–ãƒ©ã‚¦ã‚¶ã§å®Ÿéš›ã«å‹•ä½œã‚’ç¢ºèª

---

**ä½œæˆæ—¥**: 2025-11-14
**æœ€çµ‚æ›´æ–°**: 2025-11-14
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0
**ä½œæˆè€…**: Claude Code
