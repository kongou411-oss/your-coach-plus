# Your Coach+ プロジェクト設定

## プロジェクト概要

Your Coach+は、React 18とFirebaseを使用したフィットネスコーチングアプリケーションです。
食事管理、トレーニング記録、コンディション記録などの機能を提供します。

## 技術スタック

- **フロントエンド**: React 19 + Vite
- **バックエンド**: Firebase（Auth, Firestore, Storage, Functions）
- **AI**: Google Gemini API
- **スタイリング**: Tailwind CSS
- **アイコン**: Lucide React
- **ビルドツール**: Vite 7.1.12

## ファイル構造

```
C:\Users\yourc\yourcoach_new\
├── src/                      # ソースコード（ビルド対象）
│   ├── main.jsx             # エントリーポイント
│   ├── App.jsx              # メインアプリコンポーネント
│   ├── index.css            # グローバルCSS
│   └── components/          # Reactコンポーネント（.jsx）
│       ├── 00_init.jsx
│       ├── 00_feature_unlock.jsx
│       ├── 01_common.jsx
│       ├── 02_auth.jsx
│       ├── 03_dashboard.jsx   # ← 実際にビルドされるファイル
│       ├── 04_settings.jsx
│       ├── 05_analysis.jsx
│       ├── 06_community.jsx
│       ├── 07_add_item_v2.jsx
│       ├── 08_app.jsx
│       ├── 10_feedback.jsx
│       ├── 11_ai_food_recognition.jsx
│       ├── 12_wearable_integration.jsx
│       ├── 13_collaborative_planning.jsx
│       ├── 14_microlearning.jsx
│       ├── 15_community_growth.jsx
│       ├── 16_history_v10.jsx
│       ├── 17_chevron_shortcut.jsx
│       └── 18_subscription.jsx
├── dist/                     # ビルド出力（デプロイ対象）
├── components/               # 旧バージョン（.js）【使用されていない】
├── public/                   # 静的ファイル
├── config.js                 # Firebase設定
├── services.js               # サービス層
├── utils.js                  # ユーティリティ関数
├── foodDatabase.js           # 食品データベース
├── trainingDatabase.js       # トレーニングデータベース
├── index.html                # Vite用エントリーHTML
├── home.html                 # ランディングページ（サービス紹介）
├── vite.config.js            # Vite設定
├── package.json              # 依存関係
└── firebase.json             # Firebase設定（publicディレクトリ: dist）
```

## 🚨 重要：ファイル構造の変更点

**プロジェクトがVite化されました！**

### 編集するファイル
- ✅ **`src/components/*.jsx`** ← これを編集する
- ❌ **`components/*.js`** ← 旧バージョン、使用されていない

### ビルド・デプロイフロー
1. `src/`内のファイルを編集
2. `npm run build`でビルド → `dist/`に出力
3. `firebase deploy --only hosting`で`dist/`をデプロイ

**キャッシュバスターは不要**（Viteがハッシュ付きファイル名を自動生成）

## 開発コマンド

### ローカル開発サーバー
```bash
npm run dev
# Vite devサーバーが起動（http://localhost:8000）
# ホットリロード対応
```

### ビルド
```bash
npm run build
# src/ をビルドして dist/ に出力
```

### プレビュー（ビルド後の確認）
```bash
npm run preview
# ビルド済みファイルをローカルでプレビュー
```

### Firebaseデプロイ
```bash
npm run build          # 必ずビルドしてから
firebase deploy --only hosting  # dist/をデプロイ
```

### デプロイの完全フロー

**🚨 重要: Git更新は必須のバックアップ手段です**

```bash
# 1. ビルド
npm run build

# 2. Git更新（バックアップ）← 必須！
git add -A
git commit -m "Fix: 変更内容の説明

🤖 Generated with [Claude Code](https://claude.com/claude-code)

Co-Authored-By: Claude <noreply@anthropic.com>"

# 3. GitHubへpush（リモートバックアップ）← 必須！
git push

# 4. Firebaseデプロイ
firebase deploy --only hosting
```

**⚠️ Git更新の重要性**:
- Gitはバックアップのために使用しています
- **コミット＋pushまで完了して初めて「Git更新完了」**
- pushしないとリモートにバックアップされず、万一の場合に大損害になります
- デプロイ前に必ずGit更新を完了すること

## 🚨 作業フロー（必須）

### 1. 初回チャット開始時：開発サーバーを起動

**必ず最初に実行:**
```bash
npm run dev
# Viteサーバーが http://localhost:8000 で起動
# ホットリロード有効
```

**理由:** 開発中の変更をリアルタイムで確認できる。

### 2. 実装完了後：セルフエラーチェック

**前提条件:**
- ⚠️ **ユーザーはブラウザキャッシュクリア（Ctrl+Shift+R）を毎回確実に実施している**
- ⚠️ **「ブラウザキャッシュをクリアしてください」などの提案は不要**
- ⚠️ **キャッシュの問題ではない前提で原因を調査すること**

**実装後、必ず以下を実行:**
1. 開発サーバー（http://localhost:8000）が起動していることを確認
2. F12を押してコンソールを開く
3. 構文エラー（SyntaxError）がないことを確認
4. **変更が反映されていない場合:**
   - Viteのホットリロードが正しく動作しているか確認
   - 開発サーバーを再起動（`taskkill /F /IM node.exe && npm run dev`）
   - ファイルの保存が正しくされているか確認
   - import文が正しいか確認
5. エラーがなければユーザーに報告
6. エラーがあれば修正してから報告

**確認項目:**
- ✅ コンソールに赤いエラーが表示されていないか
- ✅ 画面が正しく表示されているか
- ✅ ボタンがクリックできるか
- ✅ 変更内容が実際に反映されているか

### 3. デプロイ：指示されたタイミングのみ

**重要:** ユーザーが明示的に「デプロイして」と指示した場合のみ実行すること。

**デプロイ手順:**
```bash
# 1. ビルド
npm run build

# 2. Gitコミット
git add -A
git commit -m "変更内容

🤖 Generated with [Claude Code](https://claude.com/claude-code)

Co-Authored-By: Claude <noreply@anthropic.com>"

# 3. デプロイ
firebase deploy --only hosting
```

**禁止事項:**
- ❌ 勝手にデプロイしない
- ❌ 実装完了＝デプロイではない
- ❌ ビルドせずにデプロイしない
- ❌ ユーザーの確認を待たずにデプロイしない

### 4. Git更新（バックアップ）：3時間に1回確認

**重要:** 3時間ごとにユーザーに確認し、承認を得てから実行すること。

**確認フォーマット:**
```
🕐 3時間が経過しました

Git更新（バックアップ）を実行しますか？
- 変更ファイル: [ファイル一覧]
- 変更内容: [変更の概要]

承認いただければコミットします。
```

**実行コマンド（承認後）:**
```bash
git add .
git commit -m "チャット内容の説明"
```

**100%遵守事項:**
- ❌ 勝手にGit更新しない
- ❌ 3時間経過しても確認なしで実行しない
- ✅ 必ずユーザーの承認を得てから実行
- ✅ Git更新 = バックアップ + バージョン管理

## コーディング規約

### JavaScript/JSX
- **モジュール形式**: ES Modules（Vite使用）
- **命名規則**:
  - コンポーネント: PascalCase（例: `DashboardView`）
  - 関数: camelCase（例: `getFoodDB`）
  - 定数: UPPER_SNAKE_CASE（例: `DEV_MODE`）
- **React Hooks**:
  - `useState`, `useEffect`, `useCallback`, `useMemo`を適切に使用
  - 依存配列を必ず指定

### CSS
- **主要スタイル**: Tailwind CSSのユーティリティクラスを使用
- **カスタムCSS**: `src/index.css`に定義
- **ダークモード**: `dark:`プレフィックスを使用
- **レスポンシブ**: モバイルファーストで設計

### コンポーネント設計
- **単一責任の原則**: 各コンポーネントは1つの機能に集中
- **Props**: 明確な命名とデフォルト値の設定
- **State管理**: ローカルstateは最小限に、必要に応じてグローバル化

### アイコン使用規則

**重要**: アプリ内の情報表示アイコンは以下のルールに従って統一されています。

#### アイコンの使い分け

- **？アイコン（HelpCircle）**: 使い方・操作方法・手順の説明
  - 例: 「食事記録の使い方」「AI食事認識の使い方」「質問機能の使い方」
  - 用途: ユーザーが操作方法を知りたい時に使用
  - ボタンラベル: 「使い方」または「使い方を見る」
  - モーダルタイトル: 「〇〇の使い方」

- **iアイコン（Info）**: 数値の意味・計算方法・ノウハウ・コンセプトの説明
  - 例: 「採点基準」「クレジットシステム」「目的別設定」「守破離システム」
  - 用途: 仕組みや概念を理解したい時に使用
  - ボタンラベル: 「〇〇について」「〇〇とは？」「詳細を見る」
  - モーダルタイトル: 「〇〇について」「〇〇とは？」

#### 実装ガイドライン

```jsx
// ？アイコン（使い方系）- 青系の色
<button className="flex items-center gap-1 text-blue-600 hover:text-blue-700">
  <Icon name="HelpCircle" size={18} />
  <span className="text-sm">使い方</span>
</button>

// iアイコン（ノウハウ・数値系）- グレー系の色
<button className="flex items-center gap-1 text-gray-600 hover:text-gray-700">
  <Icon name="Info" size={18} />
  <span className="text-sm">詳細を見る</span>
</button>

// 装飾アイコン（クリック不可）
<div className="flex items-center gap-2 text-gray-500">
  <Icon name="Info" size={16} className="flex-shrink-0" />
  <span className="text-sm">{説明文}</span>
</div>
```

#### アイコンサイズの統一
- ボタン内アイコン: `size={18}` または `size={20}`
- 装飾アイコン: `size={14}` または `size={16}`
- タイトルアイコン: `size={20}` または `size={24}`

#### 新規実装時の判断基準
1. 「どうやって〇〇するか」を説明する → ？アイコン
2. 「〇〇とは何か」「なぜそうなるのか」を説明する → iアイコン
3. 数値の計算方法や基準を説明する → iアイコン
4. 操作手順やフローを説明する → ？アイコン

## プロジェクトの主要機能

### 認証（src/components/02_auth.jsx）
- Email/Password認証
- Google認証
- オンボーディングフロー（3ステップ）

### ダッシュボード（src/components/03_dashboard.jsx）
- 日次記録の表示
- 食事、トレーニング、サプリ、コンディションの一覧
- カロリー・PFCバランスの表示

### 入力機能（src/components/07_add_item_v2.jsx）
- 体組成入力（体重、体脂肪率）
- 食事入力（検索、カスタム、写真解析）
- 運動入力（検索、カスタム）
- コンディション入力（睡眠時間、睡眠の質、食欲、腸内環境、集中力、ストレス）

#### 食事・サプリメント入力の仕様
- **選択画面**: 「どうやって記録しますか？」で3つの選択肢を表示
  1. **写真から記録** (黒背景) - AI食事認識機能
  2. **食材を検索** (白背景、グレー枠) - データベース検索
  3. **手動で作成** (白背景、グレー枠) - カスタム入力
- **検索モーダル**: 食材/サプリメントタブで切り替え可能、カテゴリは常に展開表示
- **テンプレート**: 選択画面の下に表示（12日以上利用で開放）

### 分析機能（src/components/05_analysis.jsx）
- AI搭載のPFC分析
- カレンダービュー
- 履歴グラフ・トレンド

### コミュニティ（src/components/06_community.jsx）
- 投稿の作成・閲覧
- いいね・コメント機能
- 管理者パネル（投稿承認）

### 設定（src/components/04_settings.jsx）
- プロフィール管理
- ルーティン設定
- テンプレート管理

## データ構造

### Firestore Collections
- `users/{userId}` - ユーザープロフィール
- `users/{userId}/dailyRecords/{date}` - 日次記録
- `users/{userId}/favorites` - お気に入り
- `users/{userId}/routines` - ルーティン
- `community/posts` - コミュニティ投稿

### LocalStorage（DEV_MODE=true時）
- `currentUser` - 現在のユーザー情報
- `dailyRecords_${userId}` - 日次記録
- `favorites_${userId}` - お気に入り
- `routines_${userId}` - ルーティン

## 開発フロー

### 新機能の追加
1. `src/components/`内の該当ファイルを編集
2. 開発サーバー（`npm run dev`）で動作確認（ホットリロード有効）
3. F12でコンソールエラーをチェック
4. ビルド（`npm run build`）
5. 変更をコミット

### バグ修正
1. ブラウザのコンソール（F12）でエラーを確認
2. 該当するファイルを特定（`src/components/*.jsx`）
3. 修正を実施
4. 開発サーバーで動作確認
5. ビルド → コミット

### テスト
- **手動テスト**: ブラウザで各機能を実際に操作
- **DEV_MODE**: `config.js`で`DEV_MODE=true`に設定すると、Firebaseを使わずにLocalStorageでテスト可能
- **エラー確認**: 必ずブラウザのコンソール（F12）でエラーをチェック

## トラブルシューティング（現行版：Vite構成）

### ビルドエラーが発生する
1. `npm install`で依存関係を再インストール
2. `node_modules`と`package-lock.json`を削除して再インストール
3. エラーメッセージを確認して該当ファイルを修正

### 開発サーバーが起動しない
1. ポート8000が既に使用されていないか確認: `netstat -ano | findstr :8000`
2. `vite.config.js`でポート設定を確認
3. `npm run dev`を再実行

### コンポーネントが表示されない
1. ブラウザのコンソール（F12）を開いてエラーを確認
2. `src/App.jsx`でコンポーネントが正しくインポートされているか確認
3. ビルドエラーがないか確認

### Firebase接続エラー
- `config.js`のFirebase設定が正しいか確認
- Firebase Consoleでプロジェクトが有効か確認

### データが保存されない
- `config.js`で`DEV_MODE`の設定を確認
- `DEV_MODE=true`: LocalStorage使用
- `DEV_MODE=false`: Firebase使用

### スタイルが適用されない
- Tailwind CSSの設定を確認（`tailwind.config.js`）
- ビルドを再実行（`npm run build`）
- ブラウザのキャッシュをクリア（Ctrl+Shift+R）

## 重要な注意事項

### UI/UX重要事項

#### BAB（Bottom Action Bar）について
- **正しい定義**: BABは画面下部の「ホーム、履歴、PGBASE、COMY、設定」のタブバーのこと
- **絶対に「FAB」と呼ばない**: FAB（Floating Action Button）は削除済みで存在しない
- **BABの実装**: `components/08_app.js`の2096行目から実装されている
- **BABの構造**:
  - クラス: `fixed bottom-0 left-0 right-0 z-[9999] bg-white border-t shadow-lg`
  - 折りたたみボタン（ChevronUp/ChevronDown）で展開/格納を切り替え
  - `bottomBarExpanded`状態で展開時はメニューが表示される
  - 格納時の高さ: 約40px
  - 展開時の高さ: 約120-150px（メニュー内容により変動）
- **BABとの干渉回避**:
  - 固定配置のUI要素（入力欄など）は、`position: fixed; bottom: ${babHeight}px`でBABの高さに応じて位置を動的に調整する
  - ResizeObserverでBABの高さ変化を監視し、即時連動させる
  - スクロールコンテナには下部に`padding-bottom: ${babHeight + 余白}px`を確保する

#### シェブロンショートカットについて
- **BABとは別物**: 画面左右の端にある展開式ショートカットメニュー
- **実装**: `components/17_chevron_shortcut.js`に実装されている
- **位置**: 画面左右の端（`top-[85%]`の位置）にシェブロンボタンがあり、クリックで展開

### セキュリティ
- **APIキー**: `config.js`の機密情報は公開リポジトリにコミットしない
- **Firebase Rules**: Firestoreセキュリティルールを適切に設定
- **認証**: 全ての機密操作は認証済みユーザーのみに制限

### パフォーマンス
- **画像最適化**: アップロード画像は適切なサイズに圧縮
- **データ取得**: 必要なデータのみを取得（無駄なクエリを避ける）
- **キャッシュ**: 頻繁にアクセスするデータはキャッシュを活用

### メンテナンス
- **バックアップ**: 作業経過3時間で必ずバックアップを作成するように提案
- **バージョン管理**: 会話圧縮後、最優先でGitにコミット
- **ドキュメント**: 大きな変更時はREADME.mdも更新

## AI（Claude Code）への指示

### 🚨🚨🚨 最重要：解釈確認を100%実施すること 🚨🚨🚨

**【絶対厳守】すべての実装を開始する前に、必ず以下の形式で解釈を提示し、ユーザーの承認を得ること**

この解釈確認フローは**例外なく100%実施**すること。どんなに簡単に見える指示でも、必ず解釈確認を行う。解釈確認を怠ると、ユーザーの意図とは異なる実装をしてしまい、修正作業が増えてしまう。

```
## 指示内容の解釈確認

【ご指示】
[ユーザーの指示を引用]

【私の解釈】
1. [解釈1]
2. [解釈2]
...

【実装内容】
- **ファイル1**: [ファイル名]
  - [変更点1]
  - [変更点2]
- **ファイル2**: [ファイル名]
  - [変更点]

この解釈で実装してよろしいでしょうか？
```

**【重要】承認を得るまで実装を開始しないこと。解釈確認なしに実装を開始した場合、ユーザーの信頼を失う。**

### コード修正時
- 変更前に必ず該当ファイルを読み込んで現在の実装を確認
- 大きな変更の場合は、変更前のバックアップを作成するよう確認し、承認後に実行
- 変更後は必ずブラウザで動作確認
- **重要**: ユーザーから明示的な削除指示がない限り、既存のコードや機能を削除しない

### 新機能追加時
- **まず実装方針の解釈を提示し、承認を得てから実装**（必須）
- 関連する既存コードを確認し、スタイルを統一
- 必要に応じてREADME.mdも更新

### デバッグ時
- エラーメッセージを詳細に分析
- 該当箇所のコードを読み込んで問題を特定
- 修正案を複数提示（可能な場合）

### UI/UXデザイン変更時
- ユーザーが提示した画像やデザインを忠実に再現
- **デザインの変更は必ずユーザーの承認を得てから実施**（必須）
- 既存のデザインを変更する場合は、変更前の状態を確認して記録
- **絶対に勝手に削除しない**: 機能やコンポーネントの削除は必ずユーザーの明示的な指示を待つ

## 実装報告のフォーマット

実装完了時は、以下のフォーマットで報告してください。

### 報告テンプレート

```markdown
## 実装完了報告

### セッション情報（必須）
- **トークン使用量**: XX,XXX / 200,000 トークン
- **使用率**: XX%
- **経過時間**: XX分
- **使用クレジット**: XX クレジット

### 実装内容

[実装した機能の概要]

### 変更ファイル

1. **ファイル名**: `components/XX_xxx.js`
   - **変更場所**: Line XXX-YYY
   - **変更内容**: [何をどう変更したか]
   - **キャッシュバスター**: ?v=YYYYMMDDVN

2. **ファイル名**: `components/YY_yyy.js`
   - **変更場所**: Line ZZZ
   - **変更内容**: [何をどう変更したか]
   - **キャッシュバスター**: ?v=YYYYMMDDVN

### 確認方法

**場所**: [設定 → データ管理] など、機能にアクセスする具体的な場所

**手順**:
1. [確認手順1]
2. [確認手順2]
3. [確認手順3]

**期待される動作**:
- ✅ [期待される動作1]
- ✅ [期待される動作2]

### ブラウザ確認

- コンソールエラー: [あり/なし]
- 動作確認: [完了/未完了]
```

### 報告例

```markdown
## 実装完了報告

### セッション情報（必須）
- **トークン使用量**: 45,230 / 200,000 トークン
- **使用率**: 22.6%
- **経過時間**: 15分
- **使用クレジット**: 0.5 クレジット

### 実装内容

カスタムアイテム（食材・料理・サプリ）の管理機能を実装しました。

### 変更ファイル

1. **ファイル名**: `components/07_add_item_v2.js`
   - **変更場所**: Line 3956-3958 (category自動設定), Line 2925-2931 (カスタムサプリ表示), Line 3440 (カスタム判定)
   - **変更内容**:
     - itemTypeに応じてcategoryを自動設定（カスタム食材/カスタム料理/カスタムサプリ）
     - 検索モーダルでカスタムサプリを表示するロジックを追加
     - カスタムアイテム判定にカスタムサプリを追加
   - **キャッシュバスター**: ?v=20251028v6

2. **ファイル名**: `components/04_settings.js`
   - **変更場所**: Line 2510-2725 (データ管理セクション内に追加)
   - **変更内容**: データ管理セクション内にカスタムアイテム管理UIを追加（3タブ：食材/料理/サプリ）
   - **キャッシュバスター**: ?v=20251028v2

### 確認方法

**場所**: 設定（右下タブ）→ データ管理セクションを展開

**手順**:
1. 設定画面を開く
2. 「データ管理」セクションをクリックして展開
3. 「カスタムアイテム管理」が表示されることを確認
4. 食材/料理/サプリのタブが表示されることを確認
5. カスタムアイテムがある場合、一覧が表示されることを確認
6. 編集・削除ボタンが表示されることを確認

**期待される動作**:
- ✅ データ管理セクション内にカスタムアイテム管理が表示される
- ✅ 3つのタブ（食材・料理・サプリ）が正しく切り替わる
- ✅ 各タブに該当するアイテムのみが表示される
- ✅ 「すべて削除」ボタンでカテゴリ単位の削除ができる
- ✅ 個別の編集・削除ボタンが機能する

### ブラウザ確認

- コンソールエラー: なし
- 動作確認: 完了
```

### 重要なポイント

1. **セッション情報を必ず報告**: トークン使用量・使用率・経過時間・使用クレジットを明記
2. **変更場所を明記**: 行番号を必ず記載する
3. **キャッシュバスターを必ず更新**: 変更したすべてのファイルのキャッシュバスターを明記
4. **確認方法を具体的に**: ユーザーが実際に確認できる手順を記載
5. **期待される動作を列挙**: チェックリスト形式で明確に

## 今後の改善予定

1. ~~**モジュール化**: components.jsのさらなる分割~~ ✅ 完了（Vite化）
2. ~~**ビルドツール**: Vite/Webpackの導入~~ ✅ 完了（Vite 7.1.12）
3. **TypeScript化**: 型安全性の向上
4. **テスト**: Jest + React Testing Libraryの導入
5. **パフォーマンス**: Code splitting, Lazy loading

---

# 📚 旧バージョン用リファレンス（components/*.js使用時）

**⚠️ 注意: 以下は旧バージョン（CDN版React + components/*.js）用の情報です。**
**現在のプロジェクトはVite構成（src/components/*.jsx）を使用しています。**

## 旧バージョンのファイル構造

```
C:\Users\yourc\yourcoach_new\
├── components/              # 旧Reactコンポーネント（.js）【使用されていない・削除済み】
│   ├── 00_init.js
│   ├── 02_auth.js
│   ├── 03_dashboard.js
│   └── ...
├── styles.css               # カスタムCSS
├── styles_dark.css          # ダークモードスタイル
└── ...
```

## 旧バージョンの開発コマンド

### ローカル開発サーバー（旧）
```bash
python -m http.server 8000
# ブラウザで http://localhost:8000 を開く
```

### キャッシュバスターの更新（旧バージョンのみ必要）

**重要:** 旧バージョンでコンポーネントファイルを編集した後、ブラウザに変更を反映させるには**必ず**キャッシュバスターを更新する必要がありました。

#### キャッシュバスターとは
index_old.htmlで読み込まれるJavaScriptファイルのURLに付与されているバージョン番号（例: `?v=20251028v1`）のこと。この値を変更することで、ブラウザに新しいファイルを強制的に読み込ませることができます。

#### 更新手順（旧バージョン）

1. **編集したファイル名を確認**
   - 例: `components/07_add_item_v2.js` を編集した場合

2. **index_old.htmlを開く**

3. **該当ファイルの読み込み行を検索**
   ```html
   <script type="text/babel" src="components/07_add_item_v2.js?v=20251025v11"></script>
   ```

4. **キャッシュバスターを更新**
   - フォーマット: `YYYYMMDD + v + 連番`
   - 例: `20251028v1` → `20251028v2`（同日2回目の更新の場合）
   - 例: `20251025v11` → `20251028v1`（日付が変わった場合は連番をリセット）
   ```html
   <script type="text/babel" src="components/07_add_item_v2.js?v=20251028v1"></script>
   ```

5. **ブラウザでスーパーリロード**
   - Windows: `Ctrl + Shift + R` または `Ctrl + F5`
   - Mac: `Cmd + Shift + R`

6. **動作確認**
   - F12でコンソールを開き、エラーがないことを確認
   - 実装した機能が正しく動作することを確認

#### 更新が必要なケース（旧バージョン）
- ✅ コンポーネントファイル（components/*.js）を編集した場合
- ✅ services.js、utils.js、config.jsを編集した場合
- ✅ styles.css、styles_dark.cssを編集した場合
- ❌ データベースファイル（foodDatabase.js、trainingDatabase.js）は通常キャッシュバスター不要

#### トラブルシューティング（旧バージョン）
**問題:** キャッシュバスターを更新したのに変更が反映されない

**対策:**
1. ブラウザのキャッシュを完全にクリア（設定 → プライバシーとセキュリティ → 閲覧データを削除）
2. シークレットモードで開く
3. `clear_cache.html` を開く

### ERR_CONNECTION_REFUSED エラーの対策（旧バージョン）

**問題:** ブラウザで `http://localhost:8000` にアクセスすると `ERR_CONNECTION_REFUSED` エラーが表示される

**原因と対策:**

#### 1. サーバーが起動していない
```bash
# サーバーを起動
python -m http.server 8000
```

#### 2. ポート8000が既に使用されている
```bash
# Windowsでポート8000を使用しているプロセスを確認
netstat -ano | findstr :8000

# プロセスIDが表示されたら、タスクマネージャーで終了するか以下のコマンドで終了
# taskkill /PID [プロセスID] /F
```

#### 3. サーバーがバックグラウンドで起動しているが応答しない
```bash
# すべてのPythonプロセスを終了（注意：他のPythonプログラムも終了します）
taskkill /IM python.exe /F

# サーバーを再起動
python -m http.server 8000
```

#### 4. 代替ポートで起動（ポート8000が解放できない場合）
```bash
# ポート8080で起動
python -m http.server 8080

# ブラウザで http://localhost:8080 を開く
```

**推奨フロー（旧バージョン）:**
1. まずポート8000の使用状況を確認: `netstat -ano | findstr :8000`
2. 使用中なら強制終了: `taskkill /IM python.exe /F`
3. サーバーを起動: `python -m http.server 8000`
4. ブラウザで確認: `http://localhost:8000`

---

**最終更新**: 2025年11月5日
**プロジェクト開始**: 2025年10月12日
**Vite化**: 2025年11月4日
