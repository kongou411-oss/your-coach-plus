<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å±¥æ­´æ”¹ä¿®æ¡ˆï¼ˆã‚°ãƒ©ãƒ•å¼ï¼‰3: ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«å‹ v4ï¼ˆæœ€çµ‚ç‰ˆï¼‰</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        .tab-button {
            transition: all 0.3s ease;
            position: relative;
        }
        .tab-button.active {
            font-weight: 600;
        }
        .tab-button.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: currentColor;
        }
        .sub-tab-button {
            transition: all 0.2s ease;
        }
        .sub-tab-button.active {
            transform: scale(1.05);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .chart-container {
            animation: fadeIn 0.4s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gray-100 p-4">
    <div class="max-w-6xl mx-auto">
        <h1 class="text-2xl font-bold mb-2 text-gray-800">ğŸ“Š å±¥æ­´æ”¹ä¿®æ¡ˆï¼ˆã‚°ãƒ©ãƒ•å¼ï¼‰3: ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«å‹ v4</h1>
        <div class="bg-yellow-100 border-l-4 border-yellow-500 p-3 mb-6">
            <p class="text-sm font-semibold text-yellow-800">â­ æ¨å¥¨æ¡ˆï¼ˆæœ€çµ‚ç‰ˆï¼‰</p>
            <p class="text-xs text-yellow-700">ã‚¢ã‚¤ã‚³ãƒ³çµ±ä¸€ã€å˜ä½ä¿®æ­£ã€LBMãƒ»æŒ‡ç¤ºæ›¸é”æˆç‡è¿½åŠ ææ¡ˆä»˜ã</p>
        </div>

        <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒŠ -->
        <div class="bg-white rounded-lg shadow-lg overflow-hidden">
            <!-- å¤§ã‚«ãƒ†ã‚´ãƒªã‚¿ãƒ– -->
            <div class="flex border-b bg-gray-50">
                <button
                    class="tab-button flex-1 py-4 px-6 text-center transition active text-green-700 bg-white border-b-0"
                    onclick="selectMainCategory('nutrition')">
                    <div class="flex items-center justify-center gap-2">
                        <i data-lucide="flame" class="w-5 h-5"></i>
                        <div>
                            <div class="text-sm font-semibold">æ „é¤Šãƒ»é£Ÿäº‹</div>
                            <div class="text-xs opacity-75">85ç‚¹</div>
                        </div>
                    </div>
                </button>
                <button
                    class="tab-button flex-1 py-4 px-6 text-center transition text-gray-600"
                    onclick="selectMainCategory('training')">
                    <div class="flex items-center justify-center gap-2">
                        <i data-lucide="dumbbell" class="w-5 h-5"></i>
                        <div>
                            <div class="text-sm font-semibold">ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°</div>
                            <div class="text-xs opacity-75">88ç‚¹</div>
                        </div>
                    </div>
                </button>
                <button
                    class="tab-button flex-1 py-4 px-6 text-center transition text-gray-600"
                    onclick="selectMainCategory('condition')">
                    <div class="flex items-center justify-center gap-2">
                        <i data-lucide="heart" class="w-5 h-5"></i>
                        <div>
                            <div class="text-sm font-semibold">ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³</div>
                            <div class="text-xs opacity-75">24/30ç‚¹</div>
                        </div>
                    </div>
                </button>
            </div>

            <!-- å°ã‚«ãƒ†ã‚´ãƒªã‚¿ãƒ–ï¼ˆæ „é¤Šãƒ»é£Ÿäº‹ï¼‰ -->
            <div id="nutrition-subtabs" class="sub-tabs flex flex-wrap gap-2 p-4 bg-green-50 border-b">
                <button class="sub-tab-button active px-4 py-2 bg-white text-green-700 rounded-lg text-sm font-semibold border-2 border-green-500" onclick="selectSubCategory('nutrition', 'calories')">
                    ğŸ”¥ ã‚«ãƒ­ãƒªãƒ¼
                </button>
                <button class="sub-tab-button px-4 py-2 bg-white text-gray-700 rounded-lg text-sm font-semibold border-2 border-transparent hover:border-gray-300" onclick="selectSubCategory('nutrition', 'protein')">
                    ğŸ¥© ã‚¿ãƒ³ãƒ‘ã‚¯è³ª
                </button>
                <button class="sub-tab-button px-4 py-2 bg-white text-gray-700 rounded-lg text-sm font-semibold border-2 border-transparent hover:border-gray-300" onclick="selectSubCategory('nutrition', 'fat')">
                    ğŸ§ˆ è„‚è³ª
                </button>
                <button class="sub-tab-button px-4 py-2 bg-white text-gray-700 rounded-lg text-sm font-semibold border-2 border-transparent hover:border-gray-300" onclick="selectSubCategory('nutrition', 'carbs')">
                    ğŸš ç³–è³ª
                </button>
                <button class="sub-tab-button px-4 py-2 bg-white text-gray-700 rounded-lg text-sm font-semibold border-2 border-transparent hover:border-gray-300" onclick="selectSubCategory('nutrition', 'fiber')">
                    ğŸ¥¬ é£Ÿç‰©ç¹Šç¶­
                </button>
                <button class="sub-tab-button px-4 py-2 bg-white text-gray-700 rounded-lg text-sm font-semibold border-2 border-transparent hover:border-gray-300" onclick="selectSubCategory('nutrition', 'vitamin')">
                    ğŸ’Š ãƒ“ã‚¿ãƒŸãƒ³
                </button>
                <button class="sub-tab-button px-4 py-2 bg-white text-gray-700 rounded-lg text-sm font-semibold border-2 border-transparent hover:border-gray-300" onclick="selectSubCategory('nutrition', 'mineral')">
                    âš¡ ãƒŸãƒãƒ©ãƒ«
                </button>
            </div>

            <!-- å°ã‚«ãƒ†ã‚´ãƒªã‚¿ãƒ–ï¼ˆãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ï¼‰ -->
            <div id="training-subtabs" class="sub-tabs hidden flex-wrap gap-2 p-4 bg-red-50 border-b">
                <button class="sub-tab-button active px-4 py-2 bg-white text-red-700 rounded-lg text-sm font-semibold border-2 border-red-500" onclick="selectSubCategory('training', 'rm')">
                    ğŸ‹ï¸ RMè¨˜éŒ²
                </button>
                <button class="sub-tab-button px-4 py-2 bg-white text-gray-700 rounded-lg text-sm font-semibold border-2 border-transparent hover:border-gray-300" onclick="selectSubCategory('training', 'habit')">
                    ğŸ“ˆ é‹å‹•ç¿’æ…£ç‡
                </button>
            </div>

            <!-- å°ã‚«ãƒ†ã‚´ãƒªã‚¿ãƒ–ï¼ˆã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ï¼‰ -->
            <div id="condition-subtabs" class="sub-tabs hidden flex-wrap gap-2 p-4 bg-blue-50 border-b">
                <button class="sub-tab-button active px-4 py-2 bg-white text-blue-700 rounded-lg text-sm font-semibold border-2 border-blue-500" onclick="selectSubCategory('condition', 'total')">
                    ğŸ¯ ç·åˆã‚¹ã‚³ã‚¢
                </button>
                <button class="sub-tab-button px-4 py-2 bg-white text-gray-700 rounded-lg text-sm font-semibold border-2 border-transparent hover:border-gray-300" onclick="selectSubCategory('condition', 'sleep')">
                    ğŸ˜´ ç¡çœ ã®è³ª
                </button>
                <button class="sub-tab-button px-4 py-2 bg-white text-gray-700 rounded-lg text-sm font-semibold border-2 border-transparent hover:border-gray-300" onclick="selectSubCategory('condition', 'appetite')">
                    ğŸ½ï¸ é£Ÿæ¬²
                </button>
                <button class="sub-tab-button px-4 py-2 bg-white text-gray-700 rounded-lg text-sm font-semibold border-2 border-transparent hover:border-gray-300" onclick="selectSubCategory('condition', 'focus')">
                    ğŸ§  é›†ä¸­åŠ›
                </button>
            </div>

            <!-- è©³ç´°ã‚°ãƒ©ãƒ•è¡¨ç¤ºã‚¨ãƒªã‚¢ -->
            <div class="p-6">
                <div id="chart-display" class="chart-container">
                    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
                    <div class="flex justify-between items-center mb-6">
                        <div>
                            <h3 id="chart-title" class="text-3xl font-bold text-gray-800">ğŸ”¥ ã‚«ãƒ­ãƒªãƒ¼</h3>
                            <p id="chart-period" class="text-sm text-gray-500 mt-1">éå»7æ—¥é–“ã®æ¨ç§»</p>
                        </div>
                        <div class="text-right">
                            <div id="chart-value" class="text-5xl font-bold text-blue-600">2,450</div>
                            <div id="chart-unit" class="text-sm text-gray-500 mt-1">kcal</div>
                            <div id="chart-target" class="text-sm font-semibold text-green-600 mt-2">ç›®æ¨™: 2,500kcal (98%)</div>
                        </div>
                    </div>

                    <!-- ã‚°ãƒ©ãƒ• -->
                    <canvas id="main-chart" height="100"></canvas>

                    <!-- çµ±è¨ˆæƒ…å ± -->
                    <div id="stats-container" class="mt-6 grid grid-cols-3 gap-4 text-center">
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <div class="text-xs text-gray-600 mb-1">å¹³å‡</div>
                            <div id="stat-avg" class="text-2xl font-bold text-blue-600">2,420</div>
                            <div id="stat-avg-unit" class="text-xs text-gray-500">kcal</div>
                        </div>
                        <div class="bg-green-50 p-4 rounded-lg">
                            <div class="text-xs text-gray-600 mb-1">æœ€é«˜</div>
                            <div id="stat-max" class="text-2xl font-bold text-green-600">2,500</div>
                            <div id="stat-max-unit" class="text-xs text-gray-500">kcal</div>
                        </div>
                        <div class="bg-orange-50 p-4 rounded-lg">
                            <div class="text-xs text-gray-600 mb-1">æœ€ä½</div>
                            <div id="stat-min" class="text-2xl font-bold text-orange-600">2,380</div>
                            <div id="stat-min-unit" class="text-xs text-gray-500">kcal</div>
                        </div>
                    </div>

                    <!-- RMè¨˜éŒ²ç”¨ã®è¿½åŠ æƒ…å ± -->
                    <div id="rm-info" class="mt-6 grid grid-cols-3 gap-4 hidden">
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <div class="text-xs text-gray-600 mb-1">ãƒ™ãƒ³ãƒãƒ—ãƒ¬ã‚¹ 1RM</div>
                            <div class="text-2xl font-bold text-blue-600">100kg</div>
                            <div class="text-sm text-green-600 font-semibold">â†‘ +2kg</div>
                        </div>
                        <div class="bg-purple-50 p-4 rounded-lg">
                            <div class="text-xs text-gray-600 mb-1">ã‚¹ã‚¯ãƒ¯ãƒƒãƒˆ 5RM</div>
                            <div class="text-2xl font-bold text-purple-600">120kg</div>
                            <div class="text-sm text-gray-400">-</div>
                        </div>
                        <div class="bg-orange-50 p-4 rounded-lg">
                            <div class="text-xs text-gray-600 mb-1">ãƒ‡ãƒƒãƒ‰ãƒªãƒ•ãƒˆ 3RM</div>
                            <div class="text-2xl font-bold text-orange-600">150kg</div>
                            <div class="text-sm text-green-600 font-semibold">â†‘ +5kg</div>
                        </div>
                    </div>

                    <!-- é‹å‹•ç¿’æ…£ç‡ç”¨ã®é€±é–“ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ -->
                    <div id="habit-calendar" class="mt-6 hidden">
                        <div class="grid grid-cols-7 gap-2">
                            <div class="text-center">
                                <div class="text-xs text-gray-500 mb-2">æœˆ</div>
                                <div class="bg-green-500 rounded p-4 text-white font-bold">å®Ÿæ–½</div>
                            </div>
                            <div class="text-center">
                                <div class="text-xs text-gray-500 mb-2">ç«</div>
                                <div class="bg-green-500 rounded p-4 text-white font-bold">å®Ÿæ–½</div>
                            </div>
                            <div class="text-center">
                                <div class="text-xs text-gray-500 mb-2">æ°´</div>
                                <div class="bg-gray-200 rounded p-4 text-gray-500 font-bold">æœªå®Ÿæ–½</div>
                            </div>
                            <div class="text-center">
                                <div class="text-xs text-gray-500 mb-2">æœ¨</div>
                                <div class="bg-green-500 rounded p-4 text-white font-bold">å®Ÿæ–½</div>
                            </div>
                            <div class="text-center">
                                <div class="text-xs text-gray-500 mb-2">é‡‘</div>
                                <div class="bg-green-500 rounded p-4 text-white font-bold">å®Ÿæ–½</div>
                            </div>
                            <div class="text-center">
                                <div class="text-xs text-gray-500 mb-2">åœŸ</div>
                                <div class="bg-green-500 rounded p-4 text-white font-bold">å®Ÿæ–½</div>
                            </div>
                            <div class="text-center">
                                <div class="text-xs text-gray-500 mb-2">æ—¥</div>
                                <div class="bg-green-500 rounded p-4 text-white font-bold">å®Ÿæ–½</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- LBMãƒ»æŒ‡ç¤ºæ›¸é”æˆç‡ã®è¿½åŠ ææ¡ˆ -->
        <div class="bg-blue-50 border-l-4 border-blue-500 p-4 mt-6">
            <h3 class="font-bold text-blue-800 mb-3">ğŸ’¡ LBMãƒ»æŒ‡ç¤ºæ›¸é”æˆç‡ã‚’è¿½åŠ ã™ã‚‹å ´åˆã®ææ¡ˆ</h3>

            <div class="space-y-3 text-sm text-blue-900">
                <div class="bg-white p-3 rounded">
                    <h4 class="font-semibold mb-2">æ¡ˆA: æ–°ã—ã„å¤§ã‚«ãƒ†ã‚´ãƒªã€Œãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã€ã‚’è¿½åŠ </h4>
                    <ul class="list-disc pl-5 space-y-1">
                        <li><strong>å¤§ã‚«ãƒ†ã‚´ãƒª</strong>: æ „é¤Šãƒ»é£Ÿäº‹ | ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚° | ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ | <span class="text-purple-600 font-bold">ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹</span></li>
                        <li><strong>å°ã‚«ãƒ†ã‚´ãƒªï¼ˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ï¼‰</strong>:</li>
                        <ul class="list-circle pl-5 mt-1">
                            <li>ğŸ’ª LBMï¼ˆé™¤è„‚è‚ªä½“é‡ï¼‰- éå»30æ—¥é–“ã®æ¨ç§»ã‚°ãƒ©ãƒ•</li>
                            <li>ğŸ“‹ æŒ‡ç¤ºæ›¸é”æˆç‡ - é€±é–“ãƒ»æœˆé–“ã®é”æˆç‡ã‚°ãƒ©ãƒ•</li>
                            <li>ğŸ¯ ç·åˆåˆ†æã‚¹ã‚³ã‚¢ - 3ã¤ã®ã‚«ãƒ†ã‚´ãƒªã®åŠ é‡å¹³å‡</li>
                        </ul>
                        <li><strong>ã‚¢ã‚¤ã‚³ãƒ³æ¡ˆ</strong>: <code>TrendingUp</code> ã¾ãŸã¯ <code>Award</code></li>
                    </ul>
                </div>

                <div class="bg-white p-3 rounded">
                    <h4 class="font-semibold mb-2">æ¡ˆB: æ—¢å­˜ã‚«ãƒ†ã‚´ãƒªã«çµ±åˆ</h4>
                    <ul class="list-disc pl-5 space-y-1">
                        <li><strong>LBM â†’ ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ã«è¿½åŠ </strong>
                            <ul class="list-circle pl-5 mt-1">
                                <li>ä½“çµ„æˆã«é–¢é€£ã™ã‚‹æŒ‡æ¨™ãªã®ã§ã€ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ã‚«ãƒ†ã‚´ãƒªã®å°ã‚«ãƒ†ã‚´ãƒªã¨ã—ã¦ã€ŒğŸ’ª LBMã€ã‚’è¿½åŠ </li>
                            </ul>
                        </li>
                        <li><strong>æŒ‡ç¤ºæ›¸é”æˆç‡ â†’ ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã«è¿½åŠ </strong>
                            <ul class="list-circle pl-5 mt-1">
                                <li>é‹å‹•ç¿’æ…£ç‡ã¨åŒã˜ãã€Œå®Ÿè¡Œã€ã«é–¢ã™ã‚‹æŒ‡æ¨™ãªã®ã§ã€ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚«ãƒ†ã‚´ãƒªã®å°ã‚«ãƒ†ã‚´ãƒªã¨ã—ã¦ã€ŒğŸ“‹ æŒ‡ç¤ºæ›¸é”æˆç‡ã€ã‚’è¿½åŠ </li>
                            </ul>
                        </li>
                    </ul>
                </div>

                <div class="bg-white p-3 rounded">
                    <h4 class="font-semibold mb-2">æ¨å¥¨: æ¡ˆAï¼ˆæ–°ã‚«ãƒ†ã‚´ãƒªè¿½åŠ ï¼‰</h4>
                    <p class="text-xs">LBMã¨æŒ‡ç¤ºæ›¸é”æˆç‡ã¯ã€Œçµæœãƒ»æˆæœã€ã‚’è¡¨ã™æŒ‡æ¨™ãªã®ã§ã€ã€Œãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã€ã¨ã—ã¦ç‹¬ç«‹ã•ã›ã‚‹ã“ã¨ã§ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯è‡ªåˆ†ã®æˆé•·ã‚’ä¸€ç›®ã§æŠŠæ¡ã§ãã¾ã™ã€‚</p>
                </div>
            </div>
        </div>

        <!-- v4ã®æ”¹è‰¯ãƒã‚¤ãƒ³ãƒˆ -->
        <div class="bg-white rounded-lg shadow-md p-4 mt-6">
            <h3 class="font-bold text-lg mb-3 text-gray-800">âœ… v4ã®æ”¹è‰¯ãƒã‚¤ãƒ³ãƒˆ</h3>
            <ul class="list-disc pl-5 space-y-1 text-sm text-gray-700">
                <li><strong>ã‚¢ã‚¤ã‚³ãƒ³çµ±ä¸€</strong>: ã‚¢ãƒ—ãƒªã¨åŒã˜Lucideã‚¢ã‚¤ã‚³ãƒ³ã‚’ä½¿ç”¨ï¼ˆFlame, Dumbbell, Heartï¼‰</li>
                <li><strong>å˜ä½ä¿®æ­£</strong>: å„æŒ‡æ¨™ã«å¿œã˜ãŸæ­£ã—ã„å˜ä½ã‚’çµ±è¨ˆæƒ…å ±ã«è¡¨ç¤ºï¼ˆkcal, g, ç‚¹ãªã©ï¼‰</li>
                <li><strong>é‹å‹•ç¿’æ…£ç‡</strong>: ã€Œå®Ÿæ–½/æœªå®Ÿæ–½ã€ã®é€±é–“ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¡¨ç¤ºã«å¤‰æ›´</li>
                <li><strong>LBMãƒ»æŒ‡ç¤ºæ›¸é”æˆç‡ã®è¿½åŠ æ¡ˆ</strong>: æ–°ã‚«ãƒ†ã‚´ãƒªã€Œãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã€ã®è¿½åŠ ã‚’ææ¡ˆ</li>
            </ul>
        </div>
    </div>

    <script>
        // Lucideã‚¢ã‚¤ã‚³ãƒ³åˆæœŸåŒ–
        lucide.createIcons();

        let currentMainCategory = 'nutrition';
        let currentSubCategory = { nutrition: 'calories', training: 'rm', condition: 'total' };
        let mainChart = null;

        // ãƒ‡ãƒ¼ã‚¿å®šç¾©
        const chartData = {
            nutrition: {
                calories: {
                    values: [2400, 2450, 2500, 2420, 2380, 2460, 2480],
                    label: 'ğŸ”¥ ã‚«ãƒ­ãƒªãƒ¼',
                    unit: 'kcal',
                    color: 'rgb(59, 130, 246)',
                    target: 'ç›®æ¨™: 2,500kcal (98%)'
                },
                protein: {
                    values: [145, 150, 155, 148, 142, 152, 150],
                    label: 'ğŸ¥© ã‚¿ãƒ³ãƒ‘ã‚¯è³ª',
                    unit: 'g',
                    color: 'rgb(6, 182, 212)',
                    target: 'ç›®æ¨™: 160g (94%)'
                },
                fat: {
                    values: [60, 65, 68, 63, 62, 64, 65],
                    label: 'ğŸ§ˆ è„‚è³ª',
                    unit: 'g',
                    color: 'rgb(245, 158, 11)',
                    target: 'ç›®æ¨™: 70g (93%)'
                },
                carbs: {
                    values: [280, 285, 290, 280, 275, 290, 295],
                    label: 'ğŸš ç³–è³ª',
                    unit: 'g',
                    color: 'rgb(34, 197, 94)',
                    target: 'ç›®æ¨™: 300g (98%)'
                },
                fiber: {
                    values: [23, 24, 25, 25, 24, 24, 25],
                    label: 'ğŸ¥¬ é£Ÿç‰©ç¹Šç¶­',
                    unit: 'g',
                    color: 'rgb(132, 204, 22)',
                    target: 'ç›®æ¨™: 30g (83%)'
                },
                vitamin: {
                    values: [75, 76, 78, 79, 78, 77, 78],
                    label: 'ğŸ’Š ãƒ“ã‚¿ãƒŸãƒ³ç·åˆé”æˆç‡',
                    unit: '%',
                    color: 'rgb(168, 85, 247)',
                    target: 'ç›®æ¨™: 100%'
                },
                mineral: {
                    values: [80, 81, 82, 83, 82, 81, 82],
                    label: 'âš¡ ãƒŸãƒãƒ©ãƒ«ç·åˆé”æˆç‡',
                    unit: '%',
                    color: 'rgb(249, 115, 22)',
                    target: 'ç›®æ¨™: 100%'
                }
            },
            training: {
                rm: {
                    multiLine: true,
                    datasets: [
                        { label: 'ãƒ™ãƒ³ãƒãƒ—ãƒ¬ã‚¹ 1RM', data: [95, 97, 98, 100], color: 'rgb(59, 130, 246)' },
                        { label: 'ã‚¹ã‚¯ãƒ¯ãƒƒãƒˆ 5RM', data: [115, 117, 118, 120], color: 'rgb(168, 85, 247)' },
                        { label: 'ãƒ‡ãƒƒãƒ‰ãƒªãƒ•ãƒˆ 3RM', data: [140, 143, 145, 150], color: 'rgb(249, 115, 22)' }
                    ],
                    labels: ['ç¬¬1é€±', 'ç¬¬2é€±', 'ç¬¬3é€±', 'ç¬¬4é€±'],
                    title: 'ğŸ‹ï¸ RMè¨˜éŒ²æ¨ç§»',
                    period: 'éå»4é€±é–“'
                },
                habit: {
                    values: [1, 1, 0, 1, 1, 1, 1],
                    label: 'ğŸ“ˆ é‹å‹•ç¿’æ…£ç‡',
                    unit: '',
                    color: 'rgb(34, 197, 94)',
                    target: 'é€±6æ—¥å®Ÿæ–½ (85%)',
                    isHabit: true
                }
            },
            condition: {
                total: {
                    values: [22, 24, 26, 24, 23, 25, 24],
                    label: 'ğŸ¯ ç·åˆã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ã‚¹ã‚³ã‚¢',
                    unit: 'ç‚¹',
                    color: 'rgb(59, 130, 246)',
                    target: '/ 30ç‚¹'
                },
                sleep: {
                    values: [7, 8, 9, 8, 7, 8, 8],
                    label: 'ğŸ˜´ ç¡çœ ã®è³ª',
                    unit: 'ç‚¹',
                    color: 'rgb(59, 130, 246)',
                    target: '/ 10ç‚¹'
                },
                appetite: {
                    values: [7, 8, 8, 8, 7, 8, 8],
                    label: 'ğŸ½ï¸ é£Ÿæ¬²',
                    unit: 'ç‚¹',
                    color: 'rgb(34, 197, 94)',
                    target: '/ 10ç‚¹'
                },
                focus: {
                    values: [8, 8, 9, 8, 9, 9, 8],
                    label: 'ğŸ§  é›†ä¸­åŠ›',
                    unit: 'ç‚¹',
                    color: 'rgb(168, 85, 247)',
                    target: '/ 10ç‚¹'
                }
            }
        };

        // å¤§ã‚«ãƒ†ã‚´ãƒªé¸æŠ
        function selectMainCategory(category) {
            currentMainCategory = category;

            // å¤§ã‚«ãƒ†ã‚´ãƒªã‚¿ãƒ–ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ã‚’æ›´æ–°
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active', 'text-green-700', 'text-red-700', 'text-blue-700', 'bg-white', 'border-b-0');
                btn.classList.add('text-gray-600');
            });
            event.currentTarget.classList.add('active', 'bg-white', 'border-b-0');

            if (category === 'nutrition') {
                event.currentTarget.classList.add('text-green-700');
            } else if (category === 'training') {
                event.currentTarget.classList.add('text-red-700');
            } else if (category === 'condition') {
                event.currentTarget.classList.add('text-blue-700');
            }

            // å°ã‚«ãƒ†ã‚´ãƒªã‚¿ãƒ–ã‚’åˆ‡ã‚Šæ›¿ãˆ
            document.querySelectorAll('.sub-tabs').forEach(el => el.classList.add('hidden'));
            document.getElementById(`${category}-subtabs`).classList.remove('hidden');
            document.getElementById(`${category}-subtabs`).classList.add('flex');

            // é¸æŠä¸­ã®å°ã‚«ãƒ†ã‚´ãƒªã‚’è¡¨ç¤º
            updateChart(category, currentSubCategory[category]);
        }

        // å°ã‚«ãƒ†ã‚´ãƒªé¸æŠ
        function selectSubCategory(category, subCategory) {
            currentSubCategory[category] = subCategory;

            // å°ã‚«ãƒ†ã‚´ãƒªã‚¿ãƒ–ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ã‚’æ›´æ–°
            const subtabContainer = document.getElementById(`${category}-subtabs`);
            subtabContainer.querySelectorAll('.sub-tab-button').forEach(btn => {
                btn.classList.remove('active', 'border-green-500', 'border-red-500', 'border-blue-500', 'text-green-700', 'text-red-700', 'text-blue-700');
                btn.classList.add('border-transparent', 'text-gray-700');
            });

            event.currentTarget.classList.add('active');
            event.currentTarget.classList.remove('border-transparent', 'text-gray-700');

            if (category === 'nutrition') {
                event.currentTarget.classList.add('border-green-500', 'text-green-700');
            } else if (category === 'training') {
                event.currentTarget.classList.add('border-red-500', 'text-red-700');
            } else if (category === 'condition') {
                event.currentTarget.classList.add('border-blue-500', 'text-blue-700');
            }

            updateChart(category, subCategory);
        }

        // ã‚°ãƒ©ãƒ•æ›´æ–°
        function updateChart(category, subCategory) {
            const data = chartData[category][subCategory];

            // ã™ã¹ã¦ã®ç‰¹åˆ¥è¡¨ç¤ºã‚’éè¡¨ç¤º
            document.getElementById('rm-info').classList.add('hidden');
            document.getElementById('habit-calendar').classList.add('hidden');
            document.getElementById('stats-container').classList.remove('hidden');

            // RMè¨˜éŒ²ã®å ´åˆ
            if (data.multiLine) {
                document.getElementById('chart-title').textContent = data.title;
                document.getElementById('chart-period').textContent = data.period;
                document.getElementById('chart-value').textContent = '';
                document.getElementById('chart-unit').textContent = '';
                document.getElementById('chart-target').textContent = '';
                document.getElementById('stats-container').classList.add('hidden');
                document.getElementById('rm-info').classList.remove('hidden');

                if (mainChart) mainChart.destroy();
                mainChart = new Chart(document.getElementById('main-chart'), {
                    type: 'line',
                    data: {
                        labels: data.labels,
                        datasets: data.datasets.map(ds => ({
                            label: ds.label,
                            data: ds.data,
                            borderColor: ds.color,
                            backgroundColor: ds.color.replace('rgb', 'rgba').replace(')', ', 0.1)'),
                            tension: 0.4
                        }))
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: true,
                        plugins: { legend: { display: true, position: 'bottom' } }
                    }
                });
                return;
            }

            // é‹å‹•ç¿’æ…£ç‡ã®å ´åˆ
            if (data.isHabit) {
                document.getElementById('chart-title').textContent = data.label;
                document.getElementById('chart-period').textContent = 'éå»7æ—¥é–“ã®å®Ÿæ–½çŠ¶æ³';
                document.getElementById('chart-value').textContent = '6';
                document.getElementById('chart-unit').textContent = 'æ—¥å®Ÿæ–½';
                document.getElementById('chart-target').textContent = data.target;
                document.getElementById('stats-container').classList.add('hidden');
                document.getElementById('habit-calendar').classList.remove('hidden');

                if (mainChart) mainChart.destroy();
                mainChart = new Chart(document.getElementById('main-chart'), {
                    type: 'bar',
                    data: {
                        labels: ['æœˆ', 'ç«', 'æ°´', 'æœ¨', 'é‡‘', 'åœŸ', 'æ—¥'],
                        datasets: [{
                            label: 'é‹å‹•å®Ÿæ–½',
                            data: data.values,
                            backgroundColor: data.values.map(v => v === 1 ? data.color : 'rgb(229, 231, 235)')
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: true,
                        plugins: { legend: { display: false } },
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 1,
                                ticks: {
                                    stepSize: 1,
                                    callback: (val) => val === 1 ? 'å®Ÿæ–½' : 'æœªå®Ÿæ–½'
                                }
                            }
                        }
                    }
                });
                return;
            }

            // é€šå¸¸ã®æŒ‡æ¨™
            document.getElementById('chart-title').textContent = data.label;
            document.getElementById('chart-period').textContent = 'éå»7æ—¥é–“ã®æ¨ç§»';
            document.getElementById('chart-value').textContent = data.values[data.values.length - 1];
            document.getElementById('chart-unit').textContent = data.unit;
            document.getElementById('chart-target').textContent = data.target;

            // çµ±è¨ˆè¨ˆç®—
            const avg = (data.values.reduce((a, b) => a + b, 0) / data.values.length).toFixed(data.unit === '%' ? 1 : 0);
            const max = Math.max(...data.values);
            const min = Math.min(...data.values);

            document.getElementById('stat-avg').textContent = avg;
            document.getElementById('stat-max').textContent = max;
            document.getElementById('stat-min').textContent = min;

            // çµ±è¨ˆã®å˜ä½ã‚‚æ›´æ–°
            document.getElementById('stat-avg-unit').textContent = data.unit;
            document.getElementById('stat-max-unit').textContent = data.unit;
            document.getElementById('stat-min-unit').textContent = data.unit;

            // ã‚°ãƒ©ãƒ•æç”»
            if (mainChart) mainChart.destroy();

            const labels = ['æœˆ', 'ç«', 'æ°´', 'æœ¨', 'é‡‘', 'åœŸ', 'æ—¥'];

            mainChart = new Chart(document.getElementById('main-chart'), {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: data.label,
                        data: data.values,
                        borderColor: data.color,
                        backgroundColor: data.color.replace('rgb', 'rgba').replace(')', ', 0.1)'),
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: { legend: { display: false } }
                }
            });
        }

        // åˆæœŸè¡¨ç¤º
        updateChart('nutrition', 'calories');
    </script>
</body>
</html>