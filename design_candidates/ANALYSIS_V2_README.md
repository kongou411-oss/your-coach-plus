# AIコーチングレポート型 分析画面デザイン候補

LBM（除脂肪体重）向上に特化した、データサイエンティスト兼エリートパーソナルコーチとしてのAI分析画面を3つのスタイルで設計しました。

## 📁 ファイル一覧

1. **analysis_v2_01_report_style.html** - レポート型
2. **analysis_v2_02_card_style.html** - カード型
3. **analysis_v2_03_conversation_style.html** - 対話型

---

## 🎯 設計コンセプト

### 既存の概念からの脱却
- ❌ 総合達成率（%）
- ❌ PFC達成率
- ❌ カロリー計算
- ✅ **LBM（除脂肪体重）を最重要指標**
- ✅ **観測可能な事実と結果の相関関係**
- ✅ **勝ち・負けパターンの明確化**
- ✅ **ユーザーの閃きメモを最大限に尊重**

### 3部構成のレポート

#### ① 本日のパフォーマンスレポート (スコア: 0-100点)
- 評価（ポジティブな点3つ）
- 改善提案（具体的なアクション）

#### ② 中長期トレンド分析 (LBM向上への道筋)
- 📈 過去7日間の勝ちパターン
- 📉 過去30日間の負けパターン
- ルーティン（脚の日、胸の日など）による違いを考慮

#### ③ 次回アクションプラン (PDCAサイクル)
- **メモがある場合**: ユーザーの仮説を検証するプラン
- **メモがない場合**: AIが発見した改善点を検証するプラン

---

## 🎨 候補1: レポート型

### 特徴
- コーチングレポートを文書形式で提示
- 読みやすさを最優先
- ユーザーの閃きメモを最大限に尊重
- PDCAサイクルが明確に可視化

### メリット
✅ コーチングレポートを文書形式で提示
✅ 読みやすさを最優先（長文でも読める）
✅ ユーザーの閃きメモを最大限に尊重
✅ PDCAサイクルが明確に可視化
✅ 勝ち・負けパターンが視覚的に区別
✅ 最も専門的な印象
✅ ボディメイカー/アスリート向けに最適

### デメリット
❌ スクロール量が多い
❌ 情報密度が高い
❌ 一般ユーザーには少し重い印象

### 推奨ケース
- **スタイル**: ボディメイカー、アスリート
- 詳細な分析と根拠を重視する
- PDCAサイクルを真剣に取り組みたい
- 長文でもしっかり読む習慣がある

### UIの特徴
- 大きなスコアカード（6xlフォント、87点）
- 評価を緑のカード3つで表示
- 改善提案を黄色のカードで強調
- 勝ちパターン（緑グラデーション）
- 負けパターン（赤グラデーション）
- 閃きメモを引用ボックスで強調
- PDCAを4つのカードで明確に区別

---

## 🎨 候補2: カード型

### 特徴
- 各セクションを独立したカードとして表示
- スキャン性重視
- PDCAを折りたたみで省スペース化
- 閃きメモを視覚的に強調

### メリット
✅ 各セクションを独立したカードで表示
✅ スキャン性が高く素早く情報把握
✅ PDCAを折りたたみで省スペース化
✅ 閃きメモを視覚的に強調（グラデーション）
✅ 色分けで勝ち/負けパターンが一目瞭然
✅ モバイルで最も使いやすい
✅ 一般〜ボディメイカーまで幅広く対応

### デメリット
❌ 長文が読みにくい（要約重視）
❌ 折りたたみに気づかない可能性
❌ 専門性がやや薄い印象

### 推奨ケース
- **スタイル**: 一般、ボディメイカー
- 素早く情報を把握したい
- 必要な情報だけを展開して確認したい
- モバイルでの使用が中心
- スキャン性を重視

### UIの特徴
- コンパクトなスコアカード（4xlフォント）
- 評価を3つの小さなカード（緑グラデーション）
- 改善提案を黄色のカード
- 勝ち/負けパターンを独立したカード
- 閃きメモを紫グラデーションで強調
- PDCAを`<details>`タグで折りたたみ
- 各PDCAステップを色分け（P: 紫、D: 青、C: 緑、A: 黄）

---

## 🎨 候補3: 対話型

### 特徴
- チャット形式でコーチとの対話を演出
- ストーリーテリングで自然に読み進める
- ユーザーメモを右側に配置（会話感）
- 親しみやすく、モチベーションが上がる

### メリット
✅ チャット形式でコーチとの対話を演出
✅ ストーリーテリングで自然に読み進める
✅ ユーザーメモを右側に配置（会話感）
✅ 親しみやすく、モチベーションが上がる
✅ 情報が時系列で整理されている
✅ 最も没入感が高い
✅ 全スタイルに対応可能

### デメリット
❌ スクロール量が最も多い
❌ 情報の全体像が把握しにくい
❌ スキャン性は低い

### 推奨ケース
- **スタイル**: 一般、ボディメイカー、アスリート
- コーチとの対話を楽しみたい
- ストーリー形式で自然に情報を確認したい
- モチベーションを高めたい
- 没入感を重視

### UIの特徴
- 日付バッジ（中央配置）
- AI吹き出し（左側、白背景）
- ユーザー吹き出し（右側、紫グラデーション）
- アイコン付き吹き出し（評価、改善、勝ち、負け）
- PDCAを1つの吹き出し内に4色で区分
- チャットアプリのようなUX

---

## 📊 比較表

| 項目 | 候補1 (レポート型) | 候補2 (カード型) | 候補3 (対話型) |
|------|-------------------|-----------------|---------------|
| スキャン性 | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐ |
| 読みやすさ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| 専門性 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐ |
| 親しみやすさ | ⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| スペース効率 | ⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐ |
| 没入感 | ⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| モチベーション向上 | ⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| モバイル操作性 | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ |
| 一般ユーザー向け | ⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| ボディメイカー向け | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐ |
| アスリート向け | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐ |
| 実装難易度 | 簡単 | 中 | 中 |

---

## 🎯 推奨

### 総合的に最も推奨: **候補3（対話型）**

**理由:**
1. **最も没入感が高い**: チャット形式でコーチとの対話を演出
2. **モチベーションが上がる**: 親しみやすく、ポジティブなフィードバック
3. **ストーリーテリング**: 自然に読み進められる構成
4. **全スタイルに対応**: 一般〜アスリートまで幅広く対応
5. **ユーザーメモの尊重**: 右側配置で会話の流れを演出
6. **現代的なUX**: チャットアプリのような親しみやすいUI

### 次点: 候補2（カード型）
- **スタイル**: 一般、ボディメイカー
- モバイルで最も使いやすい
- スキャン性が高く、素早く情報把握
- スペース効率が最も高い

### 次点: 候補1（レポート型）
- **スタイル**: ボディメイカー、アスリート
- 最も専門的で詳細な分析
- PDCAサイクルが最も明確
- 長文でもしっかり読む習慣がある人向け

---

## 🔧 実装時の注意点

### 共通の実装要件

1. **データ取得**
   - 最新日のログデータ
   - 過去7日間のログデータ（勝ちパターン分析用）
   - 過去30日間のログデータ（負けパターン分析用）
   - ユーザーの閃きメモ（nullの場合もある）

2. **スコア計算アルゴリズム**
   - タンパク質摂取量
   - 睡眠時間・質
   - トレーニングボリューム
   - サプリメント摂取
   - コンディションスコア
   - ルーティン達成度

3. **相関分析**
   - ルーティン別の分析（脚の日、胸の日など）
   - 複数要因の組み合わせ（睡眠+炭水化物など）
   - 2日連続の影響（タンパク質不足など）

4. **AIレポート生成**
   - Gemini APIを使用
   - ユーザースタイル（一般/ボディメイカー/アスリート）に応じたトーン調整
   - 閃きメモがある場合は仮説検証型プラン
   - 閃きメモがない場合はAI主導型プラン

### 候補1（レポート型）の実装

```javascript
const AnalysisReportView = ({ user, latestLog, historicalData }) => {
    const [score, setScore] = useState(0);
    const [analysis, setAnalysis] = useState(null);
    const [loading, setLoading] = useState(true);

    useEffect(() => {
        const generateAnalysis = async () => {
            // スコア計算
            const calculatedScore = calculatePerformanceScore(latestLog, user.profile);
            setScore(calculatedScore);

            // AI分析生成
            const aiAnalysis = await generateAICoachingReport({
                userProfile: user.profile,
                latestLog,
                historicalData,
                hasMemo: !!latestLog.memo
            });
            setAnalysis(aiAnalysis);
            setLoading(false);
        };

        generateAnalysis();
    }, [latestLog]);

    return (
        <div className="fixed inset-0 z-50 bg-gray-50 overflow-y-auto">
            {/* レポート型UI */}
        </div>
    );
};
```

### 候補2（カード型）の実装

```javascript
const AnalysisCardView = ({ user, latestLog, historicalData }) => {
    const [expandedSections, setExpandedSections] = useState({
        plan: false,
        do: false,
        check: false,
        act: false
    });

    const toggleSection = (section) => {
        setExpandedSections(prev => ({
            ...prev,
            [section]: !prev[section]
        }));
    };

    return (
        <div className="fixed inset-0 z-50 bg-gray-50 overflow-y-auto">
            {/* カード型UI with details/summary */}
        </div>
    );
};
```

### 候補3（対話型）の実装

```javascript
const AnalysisConversationView = ({ user, latestLog, historicalData }) => {
    const [messages, setMessages] = useState([]);
    const chatEndRef = useRef(null);

    useEffect(() => {
        const generateConversation = async () => {
            // メッセージを順次追加（アニメーション効果）
            const conversationFlow = [
                { type: 'ai', content: '挨拶とスコア', delay: 0 },
                { type: 'ai', content: '評価1', delay: 500 },
                { type: 'ai', content: '評価2', delay: 1000 },
                { type: 'ai', content: '評価3', delay: 1500 },
                { type: 'ai', content: '改善提案', delay: 2000 },
                { type: 'ai', content: '勝ちパターン', delay: 2500 },
                { type: 'ai', content: '負けパターン', delay: 3000 },
                { type: 'user', content: '閃きメモ', delay: 3500 },
                { type: 'ai', content: 'フィードバック', delay: 4000 },
                { type: 'ai', content: 'PDCAプラン', delay: 4500 }
            ];

            // 順次メッセージを追加
            // ...
        };

        generateConversation();
    }, [latestLog]);

    return (
        <div className="fixed inset-0 z-50 bg-gray-50 overflow-y-auto">
            {/* 対話型UI */}
        </div>
    );
};
```

---

## 📝 AI分析生成のプロンプト設計

### Gemini APIへのプロンプト構造

```javascript
const generateAICoachingReport = async (data) => {
    const prompt = `
あなたは、トップアスリートから成長期の学生までを指導する、データサイエンティスト兼エリートパーソナルコーチです。
あなたの最重要ミッションは、ユーザーのLBM（除脂肪体重）を維持・向上させることです。

## ユーザー情報
- スタイル: ${data.userProfile.style}
- LBM: ${data.userProfile.lean_body_mass_kg}kg

## 最新日のデータ
${JSON.stringify(data.latestLog, null, 2)}

## 過去のデータ
${JSON.stringify(data.historicalData, null, 2)}

## 出力形式
以下の3部構成でレポートを生成してください：

### ① 本日のパフォーマンスレポート (スコア: 0-100点)
- 評価: [ポジティブな評価点3つ、各3行以内]
- 改善提案: [1行で具体的アクション]

### ② 中長期トレンド分析
- 📈 過去7日間の勝ちパターン: [2つ]
- 📉 過去30日間の負けパターン: [2つ]

### ③ 次回アクションプラン (PDCA)
${data.hasMemo ?
  `ユーザーのメモ: "${data.latestLog.memo}"
  このメモの仮説を検証するプランを立ててください。` :
  `AIが発見した最も重要な改善点を検証するプランを立ててください。`}

- P (Plan): [計画]
- D (Do): [実行]
- C (Check): [確認]
- A (Act): [改善]
`;

    const response = await callGeminiAPI(prompt);
    return parseResponse(response);
};
```

---

## 🚀 次のステップ

1. 各HTMLファイルをブラウザで開いて視覚的に確認
2. チームでレビュー・ディスカッション
3. 選択した候補を `components/05_analysis.js` の `AnalysisView` に実装
4. Gemini API連携の実装
5. スコア計算アルゴリズムの実装
6. 相関分析アルゴリズムの実装
7. 実機でのユーザビリティテスト

---

## 💡 ハイブリッド案の検討

3つの候補を組み合わせることも可能です：

### 案A: タブ切り替えで3スタイルを切り替え
- タブ1: 対話型（デフォルト）
- タブ2: カード型（スキャン重視）
- タブ3: レポート型（詳細分析）

### 案B: ユーザースタイルに応じて自動切り替え
- 一般 → 対話型
- ボディメイカー → カード型
- アスリート → レポート型

### 案C: 設定で切り替え可能
- ユーザーが好みのスタイルを選択できる

---

## 📌 重要な設計原則

1. **LBM最優先**: 全ての分析はLBM向上に焦点を当てる
2. **相関関係重視**: 消費カロリーではなく、観測可能な事実と結果の相関
3. **ユーザーメモの尊重**: 閃きメモがある場合は最大限に活用
4. **ルーティン考慮**: 脚の日、胸の日などの違いを分析に反映
5. **PDCA徹底**: 仮説→検証→改善のサイクルを明確化
6. **スタイル適応**: 一般/ボディメイカー/アスリートに応じたトーン調整

---

**作成日:** 2025年10月15日
**バージョン:** 2.0.0
**対象コンポーネント:** `components/05_analysis.js` - `AnalysisView`
**設計思想:** LBM向上特化型AIコーチング
